(function(t){function e(e){for(var i,s,c=e[0],o=e[1],l=e[2],d=0,p=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,c=1;c<a.length;c++){var o=a[c];0!==n[o]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},n={0:0},r=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;r.push([0,1]),a()})({0:function(t,e,a){t.exports=a("2f39")},"0087":function(t,e,a){"use strict";a("a70f")},"143f":function(t,e,a){"use strict";a("72f7f")},"2f39":function(t,e,a){"use strict";a.r(e);var i=a("c973"),n=a.n(i),r=(a("96cf"),a("ac1f"),a("5319"),a("5c7d"),a("7d6e"),a("e54f"),a("9f29"),a("985d"),a("31cd"),a("2b0e")),s=a("1f91"),c=a("42d2"),o=a("b05d"),l=a("2a19");r["default"].use(o["a"],{config:{},lang:s["a"],iconSet:c["a"],plugins:{Notify:l["a"]}});var u,d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"q-app"}},[t.ready?a("AppWindow"):a("StudioLoader")],1)},p=[],f=a("ded3"),m=a.n(f),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"hHh Lpr lff"},on:{scroll:t.onScroll}},[a("q-header",{class:t.headerClasses,attrs:{elevated:""}},[a("div",{staticClass:"row items-center"},[a("div",{staticStyle:{"min-width":"400px"}},[a("div",{staticClass:"text-h6 q-py-sm q-px-lg",attrs:{"data-cy":"main-title"}},[t._v("\n          Bluetooth GATT Configurator\n        ")])]),a("q-separator",{staticClass:"gt-sm bg-grey-6",attrs:{vertical:""}}),t.sigLayout?a("q-btn",{staticClass:"q-mx-md q-pr-sm",attrs:{dense:"","no-caps":"",icon:"chevron_left",color:"primary",label:"Back","data-cy":"btn-sig-back"},on:{click:function(e){return t.setSigLayout(!1)}}}):t._e(),a("ActivePageTitle",{staticClass:"col"}),a("q-btn",t._b({staticClass:"q-mr-sm q-px-xs",attrs:{dense:"",label:"View Manual",color:"primary",size:"m","data-cy":"btn-manual"},on:{click:function(e){return t.goToMarkdownId(null)}}},"q-btn",t.BUTTON_PROPS,!1))],1)]),a("q-drawer",{attrs:{value:!0,mini:t.mini,"show-if-above":"",elevated:"",behavior:"desktop",width:400,"mini-width":32}},[a("div",{staticClass:"fit column"},[a("div",{staticClass:"row justify-between items-center q-py-xs"},[a("ButtonBar",{staticClass:"q-mini-drawer-hide q-pl-md"}),a("q-btn",{attrs:{dense:"",flat:"",color:"primary",icon:t.mini?"mdi-chevron-double-right":"mdi-chevron-double-left","data-cy":"btn-drawer-open-close"},on:{click:function(e){t.mini=!t.mini}}})],1),a("q-separator",{staticClass:"q-mini-drawer-hide",staticStyle:{height:"1px"}}),a("div",{staticClass:"col q-mini-drawer-hide"},[a("q-scroll-area",{staticClass:"fit"},[a("GattTree")],1)],1)],1)]),a("q-page-container",[a("q-page",{staticClass:"column",attrs:{padding:""}},[t.sigLayout?a("SigLayout"):t.layout==t.GATT_TYPES.profile?a("ProfileLayout"):t.layout==t.GATT_TYPES.service?a("ServiceLayout"):t.layout==t.GATT_TYPES.characteristic?a("CharacteristicLayout"):t.layout==t.GATT_TYPES.descriptor?a("DescriptorLayout"):t._e()],1)],1),a("UpgradeRuleDialog",{attrs:{"upgrade-results":t.gatt.upgrade_results}}),a("WaspMarkdown",{attrs:{"image-tag":"./md/"}}),a("ProfileValidators",{attrs:{"gatt-item":t.gatt}})],1)},h=[],g=a("2f62"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.sigLayout?a("div",{staticClass:"column q-pl-md sig-title"},[a("div",{staticClass:"gt-sm sig-title-main"},[t._v(t._s(t.SIG_META.title))]),a("div",{staticClass:"gt-sm sig-title-details"},[t._v(t._s(t.SIG_META.title_details))])]):a("div",{staticClass:"row text-grey-7 items-center q-px-md"},t._l(t.pathElements,(function(e,i){return a("div",{key:i,staticClass:"gt-sm row items-center"},[i>0?a("q-icon",{staticClass:"items-center q-pa-sm",attrs:{name:"chevron_right",size:"sm"}}):t._e(),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"items-center q-pa-sm",attrs:{clickable:""},on:{click:function(){t.setSelectedItem(t.itemByVueId(e.vueId))}}},[a("q-icon",{staticClass:"q-pr-sm",attrs:{name:e.icon,color:e.color,size:"sm"}}),t._v("\n      "+t._s(e.name)+"\n    ")],1)],1)})),0)},_=[],y=(a("b0c0"),a("9523")),I=a.n(y),C={profile:"profile",service:"service",characteristic:"characteristic",descriptor:"descriptor"},T={outlined:!0,dense:!0,hideBottomSpace:!0},w={flat:!0,round:!0,dense:!0,color:"primary"},S={outline:!0,"no-caps":!0},E=(u={},I()(u,C.profile,{name:"mdi-alpha-p-box-outline",color:"blue"}),I()(u,C.service,{name:"mdi-alpha-s-box-outline",color:"green"}),I()(u,C.characteristic,{name:"mdi-alpha-c-box-outline",color:"orange"}),I()(u,C.descriptor,{name:"mdi-alpha-d-box-outline",color:"red"}),u),O={name:{label:"Custom GATT name"},gatt_caching:{label:"GATT Caching"},generic_attribute_service:{label:"Generic Attribute Service"},capability_declarations:{label:"Capability declarations",column_labels:{name:"Name",enable:"Enabled"}}},q={name:{label:"Name",description:""},uuid:{label:"UUID",description:""},type:{label:"SIG type",description:""},declaration_type:{label:"Declaration type",description:"",items:["primary","secondary"]},id:{label:"ID",description:""},advertise:{label:"Advertise service",description:""},includes:{label:"Service includes",description:""},capabilities:{label:"Service capabilities",description:""},characteristics:{label:"",description:""},info:{label:"Info",description:""}},k={constant:{label:"Constant"},length:{label:"Value length",unit:"byte"},variable_length:{label:"Variable length"},init_value:{label:"Initial value"},type:{label:"Value type",items:["user","hex","utf-8"]}},A={name:{label:"Name"},id:{label:"ID"},uuid:{label:"UUID"},type:{label:"SIG type"},properties:{label:"Permission settings",column_labels:{enable:"",name:"Name",authenticated:"Authenticated",bonded:"Bonded",encrypted:"Encrypted"},property_names:{read:"Read",write:"Write",reliable_write:"Reliable write",write_no_response:"Write without response",notify:"Notify",indicate:"Indicate"}},capabilities:{label:"Characteristic capabilities",description:""},description:{label:"User description"},info:{label:"Info",description:""}},x={name:{label:"Name"},id:{label:"ID"},uuid:{label:"UUID"},type:{label:"SIG type"},discoverable:{label:"Discoverable"},properties:{label:"Permission settings",column_labels:{enable:"",name:"Name",authenticated:"Authenticated",bonded:"Bonded",encrypted:"Encrypted"},property_names:{read:"Read",write:"Write"}},info:{label:"Info",description:""}},P={title:"Add Standard Bluetooth Services, Characteristics, Descriptors",title_details:"Drag and drop services, characteristics and descriptors from the right side panel to Custom Bluetooth GATT profile",source_labels:{sig:"BT",homekit:"Apple Homekit",silabs:"Silicon Labs",mesh:"BT Mesh"}},M={sig_gatt_item_added:{single:{service:" Service",characteristic:" Characteristic",descriptor:" Descriptor",item:" GATT item",added:" has been added successfully."},multiple:{service:" Services",characteristic:" Characteristics",descriptor:" Descriptors",item:" GATT items",added:" have been added successfully."}},new_custom_item:{custom:"Custom ",added:" has been added."},duplicate_item:{duplicated:" has been duplicated."},import_item:{success:"Import has been successful."}},D={data:function(){return{ICONS:E,SIG_META:P}},computed:m()(m()(m()({},Object(g["mapGetters"])("GattConfiguratorApp",["gatt","selectedItem","itemByVueId"])),Object(g["mapGetters"])("MainView",["sigLayout"])),{},{pathElements:function(){var t=[],e=this.selectedItem;while(null!=e["parent"])e=e.parent,t.unshift({name:e.name,icon:E[e.gatt_type].name,color:E[e.gatt_type].color,vueId:e.vueId});return t}}),methods:m()({},Object(g["mapActions"])("GattConfiguratorApp",["setSelectedItem"]))},V=D,N=a("2877"),R=a("0016"),G=a("66e5"),j=a("714f"),U=a("eebe"),L=a.n(U),Q=Object(N["a"])(V,b,_,!1,null,null,null),$=Q.exports;L()(Q,"components",{QIcon:R["a"],QItem:G["a"]}),L()(Q,"directives",{Ripple:j["a"]});var B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pt-sm"},[a("div",{staticClass:"row treeNode",class:{selectedNode:t.gatt==t.selectedItem}},[a("div",{staticClass:"col-auto"},[a("q-icon",{staticClass:"invisible",attrs:{name:"mdi-menu-down",size:"sm"}})],1),a("GattTreeItem",{staticClass:"col cursor-pointer",attrs:{value:t.gatt},on:{click:t.setSelectedItem}}),a("GattTreeItemValidation",{attrs:{value:t.gatt}})],1),a("DragTree",{staticClass:"q-pl-md",attrs:{value:t.gatt.services,"set-children":t.setKids,"node-key":"vueId","expand-default":!0,groups:t.groups,level:1,selected:t.selectedItem},on:{input:function(e){return t.setKids(t.gatt,e)}},scopedSlots:t._u([{key:"label",fn:function(e){var i=e.node;return[a("div",{staticClass:"row"},[a("GattTreeItem",{staticClass:"cursor-pointer col",class:{"capability-disabled":t.capabilityDisabled(i)},attrs:{value:i},on:{click:t.setSelectedItem}}),a("GattTreeItemValidation",{attrs:{value:i}})],1)]}}])}),t.serviceContributions.length?a("div",{staticClass:"row items-center q-px-md"},[a("q-separator",{staticClass:"col"}),a("div",{staticClass:"text-caption q-px-sm text-grey"},[t._v("\n      Contributed items\n    ")]),a("q-separator",{staticClass:"col"}),a("q-icon",{staticClass:"q-ml-sm",attrs:{name:"mdi-information-outline",size:"sm",color:"grey-5"}},[a("q-tooltip",[t._v("\n        The following items are contributed by software components "),a("br"),t._v("\n        and cannot be modified in the Bluetooth GATT Configurator.\n      ")])],1)],1):t._e(),t.serviceContributions.length?a("DragTree",{staticClass:"q-pl-md",attrs:{value:t.serviceContributions,"node-key":"vueId","expand-default":!0,"drag-options":{disabled:!0},"read-only":"",level:1,selected:t.selectedItem},scopedSlots:t._u([{key:"label",fn:function(e){var i=e.node;return[a("GattTreeItem",{staticClass:"cursor-pointer text-italic",class:{"capability-disabled":t.capabilityDisabled(i)},attrs:{value:i},on:{click:t.setSelectedItem}})]}}],null,!1,1943040851)}):t._e()],1)},Y=[],F=a("6374"),z=a.n(F),W=a("448a"),H=a.n(W),K=(a("159b"),a("a434"),a("99af"),a("c740"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vuedraggable",t._g(t._b({staticClass:"item-container",attrs:{tag:"div",value:t.value,group:t.groups[0]||t.level},on:{input:t.emitter}},"vuedraggable",t.dragOptions,!1),t.dragEvents),t._l(t.value,(function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:!t.hide&&!e.hide,expression:"!hide && !node.hide"}],key:e[t.nodeKey]},[a("div",{staticClass:"row treeNode",class:{selectedNode:e==t.selected},style:t.leftMargin},[a("div",{staticClass:"col-auto"},[a("q-icon",{staticClass:"cursor-pointer",class:{invisible:!(e.children&&e.children.length)},attrs:{name:t.isExpanded(e)?"mdi-menu-down":"mdi-menu-right",size:"sm"},on:{click:function(a){t.setExpanded(e,!t.isExpanded(e))}}})],1),a("div",{staticClass:"col"},[t._t("label",[t._v("error")],{node:e})],2)]),!e.children||t.readOnly&&!t.isExpanded(e)?t._e():a("DragTree",{staticClass:"q-pl-md",attrs:{value:e.children,"node-key":t.nodeKey,groups:t.groups.slice(1),level:t.level+1,"expand-default":t.expandDefault,hide:!t.isExpanded(e),"set-children":t.setChildren,"drag-options":t.dragOptions,"drag-events":t.dragEvents,selected:t.selected,"read-only":t.readOnly},on:{input:function(a){return t.setChildren(e,a)}},scopedSlots:t._u([{key:"label",fn:function(e){return[t._t("label",[t._v("he")],{node:e.node})]}}],null,!0)})],1)})),0)}),J=[],Z=(a("a9e3"),a("e260"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("b76a")),X=a.n(Z),tt={name:"DragTree",components:{vuedraggable:X.a},props:{nodeKey:{type:String,default:"vueId"},groups:{type:Array,default:function(){return[]}},level:{default:0,type:Number},expandDefault:{type:Boolean,default:!1},value:{default:null,type:Array},dragEvents:{type:Object,default:function(){}},dragOptions:{type:Object,default:function(){}},hide:Boolean,setChildren:{type:Function,default:function(t,e){t.children=e}},readOnly:{type:Boolean,default:!1},expandedItems:Set,selected:{type:Object,default:null}},data:function(){return{shift:15,expanded_local:null}},computed:{leftMargin:function(){var t=16*this.level;return"margin-left: -".concat(t,"px; padding-left: ").concat(t,"px;")},expanded:{get:function(){return this.expandedItems||this.expanded_local},set:function(t){this.expandedItems||(this.expanded_local=t),this.$emit("update:expandedItems",t)}}},watch:{},created:function(){if(this.expandedItems||(this.expanded_local=new Set),this.expandDefault){var t,e=new Set(this.expanded),a=z()(this.value);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.add(i[this.nodeKey])}}catch(n){a.e(n)}finally{a.f()}this.expanded=e}},methods:{emitter:function(t){this.$emit("input",t)},isExpanded:function(t){return this.expanded.has(t[this.nodeKey])},setExpanded:function(t,e){var a=new Set(this.expanded);e?a.add(t[this.nodeKey]):a.delete(t[this.nodeKey]),this.expanded=a}}},et=tt,at=Object(N["a"])(et,K,J,!1,null,null,null),it=at.exports;L()(at,"components",{QIcon:R["a"]});var nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row q-gutter-xs items-center",attrs:{"data-cy":"gatt-tree-item-"+t.value.gatt_type},on:{click:t.onClick,mousedown:t.onMouseDown}},[a("q-icon",{attrs:{size:"sm",name:t.ICONS[t.value.gatt_type].name,color:t.ICONS[t.value.gatt_type].color}},[a("q-tooltip",[a("div",{staticClass:"text-capitalize"},[t._v(t._s(t.value.gatt_type))])])],1),a("div",{staticClass:"col"},[t._v(t._s(t.value.name))])],1)},rt=[],st={name:"GattTreeItem",props:{value:{type:Object,required:!0}},data:function(){return{ICONS:E}},methods:{onClick:function(){this.$emit("click",this.value)},onMouseDown:function(){this.$emit("mousedown",this.value)}}},ct=st,ot=a("05c0"),lt=Object(N["a"])(ct,nt,rt,!1,null,null,null),ut=lt.exports;L()(lt,"components",{QIcon:R["a"],QTooltip:ot["a"]});var dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"validationMessages"in t.value&&Object.keys(t.value["validationMessages"]).length>0?a("div",{staticClass:"q-mr-sm q-pr-xs"},[a("ValidationMarker",{attrs:{type:t.cumulatedValMsgs.type,messages:t.cumulatedValMsgs.messages}})],1):t._e()},pt=[],ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.render?a("q-icon",{class:t.iconClass,attrs:{name:t.icon,size:"sm"}},[a("q-tooltip",{attrs:{"content-class":t.tooltipClass}},t._l(t.messages,(function(e,i){return a("div",{key:i},[t._v("\n      "+t._s(e)+"\n    ")])})),0)],1):t.placeholder?a("q-icon",{attrs:{name:"mdi-blank",size:"sm"}}):t._e()},mt=[],vt=(a("caad"),{error:"mdi-alert-circle",warning:"mdi-alert",info:"mdi-information-outline"}),ht={error:"alert-error-icon",warning:"alert-warning-icon",info:"alert-info"},gt={error:"alert-error-tooltip",warning:"alert-warning-tooltip",info:""},bt=["error","warning","info"],_t={props:{type:{type:String,default:"info"},messages:{type:Array,default:function(){return[]}},placeholder:Boolean},computed:{render:function(){return bt.includes(this.type)},icon:function(){return vt[this.type]},iconClass:function(){return ht[this.type]},tooltipClass:function(){return gt[this.type]}}},yt=_t,It=(a("c93e"),Object(N["a"])(yt,ft,mt,!1,null,null,null)),Ct=It.exports;L()(It,"components",{QIcon:R["a"],QTooltip:ot["a"]});var Tt={name:"GattTreeItem",components:{ValidationMarker:Ct},props:{value:{type:Object,required:!0}},computed:{cumulatedValMsgs:function(){for(var t={type:null,messages:[]},e=this.value.validationMessages,a=0,i=["error","warning"];a<i.length;a++){var n=i[a];for(var r in e)if(n in e[r]&&(null==t.type||t.type==n)){var s,c=z()(e[r][n]);try{for(c.s();!(s=c.n()).done;){var o=s.value;t.type=n,-1==t.messages.indexOf(o)&&t.messages.push(o)}}catch(l){c.e(l)}finally{c.f()}}}return t}},methods:{onClick:function(){this.$emit("click",this.value)}}},wt=Tt,St=Object(N["a"])(wt,dt,pt,!1,null,null,null),Et=St.exports,Ot=a("853f"),qt=(a("d81d"),a("2532"),a("a4d3"),a("e01a"),a("cca6"),a("2ca0"),a("1732"));function kt(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.gatt_caching,i=void 0===a||a,n=e.generic_attribute_service,r=void 0===n||n,s=e.name,c=void 0===s?"Custom Gatt Config":s,o=e.capability_declarations,l=void 0===o?[]:o,u=e.services,d=void 0===u?[]:u,p=e.upgrade_results,f=void 0===p?null:p;this.gatt_caching=i,this.generic_attribute_service=r,this.name=c,this.capability_declarations=l.map((function(t){return new At(t)})),this.services=d.map((function(e){return new xt(e,t)})),this.upgrade_results=f}function At(t){var e=t.name,a=void 0===e?"Feature":e,i=t.enable,n=void 0===i||i;this.name=a,this.enable=n}function xt(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.name,i=void 0===a?"Custom Service":a,n=e.uuid,r=void 0===n?Object(qt["a"])():n,s=e.type,c=void 0===s?"":s,o=e.info,l=void 0===o?"":o,u=e.id,d=void 0===u?null:u,p=e.instance_id,f=void 0===p?null:p,m=e.capabilities,v=void 0===m?[]:m,h=e.advertise,g=void 0!==h&&h,b=e.declaration_type,_=void 0===b?"primary":b,y=e.includes,I=void 0===y?[]:y,C=e.characteristics,T=void 0===C?[]:C;this.name=i,this.uuid=r,this.type=c,this.info=l,this.id=d,this.instance_id=f,this.capabilities=H()(v),this.advertise=g,this.declaration_type=_,this.includes=H()(I),this.characteristics=T.map((function(e){return new Pt(e,t)}))}function Pt(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.name,i=void 0===a?"Custom Characteristic":a,n=e.uuid,r=void 0===n?Object(qt["a"])():n,s=e.type,c=void 0===s?"":s,o=e.info,l=void 0===o?"":o,u=e.id,d=void 0===u?null:u,p=e.instance_id,f=void 0===p?null:p,m=e.capabilities,v=void 0===m?[]:m,h=e.value,g=void 0===h?{}:h,b=e.description,_=void 0===b?null:b,y=e.permissions,I=void 0===y?{}:y,C=e.descriptors,T=void 0===C?[]:C;this.name=i,this.uuid=r,this.type=c,this.info=l,this.id=d,this.instance_id=f,this.capabilities=H()(v),this.value=new Vt(g),this.description=_,this.permissions=new Nt(I),this.descriptors=T.map((function(e){return new Mt(e,t)}))}function Mt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,a=void 0===e?"Custom Descriptor":e,i=t.uuid,n=void 0===i?Object(qt["a"])():i,r=t.type,s=void 0===r?"":r,c=t.info,o=void 0===c?"":c,l=t.id,u=void 0===l?null:l,d=t.instance_id,p=void 0===d?null:d,f=t.capabilities,m=void 0===f?[]:f,v=t.discoverable,h=void 0===v||v,g=t.value,b=void 0===g?{}:g,_=t.permissions,y=void 0===_?{}:_;this.name=a,this.uuid=n,this.type=s,this.info=o,this.id=u,this.instance_id=p,this.capabilities=H()(m),this.discoverable=h,this.value=new Vt(b),this.permissions=new Rt(y)}function Dt(t){return"hex"===t}function Vt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.constant,a=void 0!==e&&e,i=t.length,n=void 0===i?null:i,r=t.variable_length,s=void 0!==r&&r,c=t.type,o=void 0===c?"hex":c,l=t.init_value,u=void 0===l?"00":l;Object.assign(this,{constant:a,length:n,variable_length:s,type:o,init_value:u}),Dt(o)&&u.startsWith("0x")&&(this.init_value=u.replace("0x",""))}function Nt(t){var e=t.read,a=void 0===e?{properties:{read:!1}}:e,i=t.write,n=void 0===i?{properties:{write:!1,write_no_response:!1,reliable_write:!1}}:i,r=t.notify,s=void 0===r?{properties:{notify:!1,indicate:!1}}:r;this.read=new Gt(a),this.write=new Gt(n),this.notify=new Gt(s)}function Rt(t){var e=t.read,a=void 0===e?{properties:{read:!1}}:e,i=t.write,n=void 0===i?{properties:{write:!1}}:i;this.read=new Gt(a),this.write=new Gt(n)}function Gt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.authenticated,a=void 0!==e&&e,i=t.bonded,n=void 0!==i&&i,r=t.encrypted,s=void 0!==r&&r,c=t.properties,o=void 0===c?{}:c;this.authenticated=a,this.bonded=n,this.encrypted=s,this.properties=o}function jt(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.capability_declarations,i=void 0===a?[]:a,n=e.services,r=void 0===n?[]:n,s=e.source_file,c=void 0===s?null:s;kt.call(this,m()(m()({},e),{},{services:[],capability_declarations:[]})),this.source_file=c,this.capability_declarations=i.map((function(t){return new Ut(m()(m()({},t),{},{source_file:c}))})),this.services=r.map((function(e){return new Lt(m()(m()({},e),{},{parent:t}))})),this.vueId=Object(qt["a"])(),this.undraggable=!0,this.validationMessages={}}function Ut(t){var e=t.name,a=void 0===e?"Feature":e,i=t.enable,n=void 0===i||i,r=t.source_file,s=void 0===r?null:r;this.name=a,this.enable=n,this.source_file=s}function Lt(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.characteristics,i=void 0===a?[]:a,n=e.parent,r=void 0===n?null:n,s=e.source_file,c=void 0===s?null:s;xt.call(this,m()(m()({},e),{},{characteristics:[]})),this.source_file=c||(r?r.source_file:null),this.characteristics=i.map((function(e){return new Qt(m()(m()({},e),{},{parent:t}))})),this.vueId=Object(qt["a"])(),this.parent=r,this.undraggable=null!=this.source_file,this.validationMessages={}}function Qt(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.descriptors,i=void 0===a?[]:a,n=e.parent,r=void 0===n?null:n,s=e.source_file,c=void 0===s?null:s;Pt.call(this,m()(m()({},e),{},{descriptors:[]})),this.source_file=c||(r?r.source_file:null),this.descriptors=i.map((function(e){return new $t(m()(m()({},e),{},{parent:t}))})),this.vueId=Object(qt["a"])(),this.parent=r,this.undraggable=null!=this.source_file,this.validationMessages={}}function $t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.parent,a=void 0===e?null:e,i=t.source_file,n=void 0===i?null:i;Mt.call(this,t),this.source_file=n||(a?a.source_file:null),this.vueId=Object(qt["a"])(),this.parent=a,this.undraggable=null!=this.source_file,this.validationMessages={}}function Bt(t){if(t.visit(this),this.children){var e,a=z()(this.children);try{for(a.s();!(e=a.n()).done;){var i=e.value;i.accept(t)}}catch(n){a.e(n)}finally{a.f()}}}jt.prototype.gatt_type=C.profile,Lt.prototype.gatt_type=C.service,Qt.prototype.gatt_type=C.characteristic,$t.prototype.gatt_type=C.descriptor,Object.defineProperty(jt.prototype,"children",{get:function(){return this.services},set:function(t){this.services=t}}),Object.defineProperty(Lt.prototype,"children",{get:function(){return this.characteristics},set:function(t){this.characteristics=t}}),Object.defineProperty(Qt.prototype,"children",{get:function(){return this.descriptors},set:function(t){this.descriptors=t}}),jt.prototype.accept=Bt,Lt.prototype.accept=Bt,Qt.prototype.accept=Bt,$t.prototype.accept=Bt;var Yt=a("af17"),Ft=(a("dffb"),a("b64b"),a("5218"));function zt(t){var e=t.gattType,a=t.gattItem;if(null!=e&&null!=a){var i={};switch(Object.keys(C).forEach((function(t){return i[t]=0})),e){case C.profile:i.profile=1,i.service=a.services.length,a.services.forEach((function(t){i.characteristic+=t.characteristics.length,t.characteristics.forEach((function(t){return i.descriptor+=t.descriptors.length}))}));break;case C.service:i.service=1,i.characteristic=a.characteristics.length,a.characteristics.forEach((function(t){return i.descriptor+=t.descriptors.length}));break;case C.characteristic:i.characteristic=1,i.descriptor=a.descriptors.length;break;case C.descriptor:i.descriptor=1;break}return i}}function Wt(t){if(null==t)return null;var e={title:"",svgIcon:Ft["a"],details:""};if(t.service+t.characteristic+t.descriptor==0)return null;if(t.service+t.characteristic+t.descriptor==1){for(var a in e["title"]=1+M.sig_gatt_item_added.single.item+M.sig_gatt_item_added.single.added,t)if(t[a]>0){e["details"]=1+M.sig_gatt_item_added.single[a]+".";break}}else e["title"]=t.service+t.characteristic+t.descriptor+M.sig_gatt_item_added.multiple.item+M.sig_gatt_item_added.multiple.added,t.service>0&&(1==t.service?e["details"]=1+M.sig_gatt_item_added.single.service:e["details"]=t.service+M.sig_gatt_item_added.multiple.service),t.characteristic>0&&(""!=e["details"]&&(e["details"]+=", "),1==t.characteristic?e["details"]+=1+M.sig_gatt_item_added.single.characteristic:e["details"]+=t.characteristic+M.sig_gatt_item_added.multiple.characteristic),t.descriptor>0&&(""!=e["details"]&&(e["details"]+=", "),1==t.descriptor?e["details"]+=1+M.sig_gatt_item_added.single.descriptor:e["details"]+=t.descriptor+M.sig_gatt_item_added.multiple.descriptor),e["details"]+=".";return e}function Ht(t){var e={title:M.new_custom_item.custom+t+M.new_custom_item.added,svgIcon:Ft["a"]};return e}function Kt(t){var e={title:"'"+t+"'"+M.duplicate_item.duplicated,svgIcon:Ft["a"]};return e}function Jt(){var t={title:M.import_item.success,svgIcon:Ft["a"]};return t}var Zt={namespaced:!0,components:{DragTree:it,GattTreeItem:ut,GattTreeItemValidation:Et},data:function(){return{ICONS:E,GATT_TYPES:C,groups:[C.service,C.characteristic,C.descriptor]}},computed:m()(m()(m()({},Object(g["mapGetters"])("GattConfiguratorApp",["gatt","mergedGatt","serviceContributions","selectedItem"])),Object(g["mapGetters"])("MainView",["id","sigLayout"])),Object(g["mapGetters"])("Sig",["draggedItemPromise"])),methods:m()(m()(m()({setSigDraggedItem:function(t,e,a,i){if(null==i||""==i||!("gattType"in i)||!("gattItem"in i))throw"Faulty sig gatt item!";var n=i.gattType,r=i.gattItem;if(Ot["a"].debug("SIG Gatt item:"),Ot["a"].debug(i,!0),n==C.profile){var s=new jt(r);s.services.forEach((function(e){return e.parent=t})),e.splice.apply(e,[a,1].concat(H()(s.services)))}else n==C.service?e[a]=new Lt(m()(m()({},r),{},{parent:t})):n==C.characteristic?e[a]=new Qt(m()(m()({},r),{},{parent:t})):n==C.descriptor?e[a]=new $t(m()(m()({},r),{},{parent:t})):Ot["a"].error("Wrong gatt type: "+n);var c=Wt(zt(i));null!=(null===c||void 0===c?void 0:c.title)&&this.$q.notify(Yt["Notifications"].qNotificationHtmlObj(Yt["Notifications"].notificationHtmlMsg(c))),this.setChildren({object:t,children:e})},setKids:function(t,e){var a=this,i=e.findIndex((function(t){return"gattType"in t&&"types"in t}));if(-1==i){var n,r=z()(e);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.parent=t}}catch(c){r.e(c)}finally{r.f()}this.setChildren({object:t,children:e})}else this.draggedItemPromise.then((function(n){a.setSigDraggedItem(t,e,i,n)})).catch((function(t){Ot["a"].error(t)}))}},Object(g["mapActions"])("GattConfiguratorApp",["setChildren","setSelectedItem"])),Object(g["mapActions"])("MainView",["updateData","setDialogOn","setSigLayout"])),{},{capabilityDisabled:function(t){if(t.gatt_type==C.profile)return!1;if(0==this.mergedGatt.capability_declarations.length)return!1;var e,a,i={},n=!1,r=!1,s=!1,c=z()(this.mergedGatt.capability_declarations);try{for(c.s();!(a=c.n()).done;)e=a.value,i[e.name]=e.enable}catch(m){c.e(m)}finally{c.f()}if(null!=t["parent"]&&null!=t["parent"]["parent"]&&t["parent"]["parent"].gatt_type==C.service&&null!=t["parent"]["parent"].capabilities&&t["parent"]["parent"].capabilities.length>0){s=!0;var o,l=z()(t["parent"]["parent"].capabilities);try{for(l.s();!(o=l.n()).done;)e=o.value,null!=i[e]&&i[e]&&(s=!1)}catch(m){l.e(m)}finally{l.f()}}if(null!=t["parent"]&&(t["parent"].gatt_type==C.characteristic||t["parent"].gatt_type==C.service)&&null!=t["parent"].capabilities&&t["parent"].capabilities.length>0){r=!0;var u,d=z()(t["parent"].capabilities);try{for(d.s();!(u=d.n()).done;)e=u.value,null!=i[e]&&i[e]&&(r=!1)}catch(m){d.e(m)}finally{d.f()}}if(null!=t.capabilities&&t.capabilities.length>0){n=!0;var p,f=z()(t.capabilities);try{for(f.s();!(p=f.n()).done;)e=p.value,null!=i[e]&&i[e]&&(n=!1)}catch(m){f.e(m)}finally{f.f()}}return s||r||n}})},Xt=Zt,te=(a("143f"),a("eb85")),ee=Object(N["a"])(Xt,B,Y,!1,null,null,null),ae=ee.exports;L()(ee,"components",{QIcon:R["a"],QSeparator:te["a"],QTooltip:ot["a"]});var ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-gutter-sm"},[a("div",{attrs:{"data-cy":"btn-button-bar-custom-add"}},[a("q-btn",t._b({attrs:{icon:"mdi-file-plus-outline",disable:!t.newChildActive},on:{click:function(e){t.showTooltip=!1}}},"q-btn",t.BUTTON_BAR_PROPS,!1),[a("q-menu",[a("q-list",{attrs:{dense:""}},[a("q-item",{attrs:{dense:"",clickable:"","data-cy":"btn-button-bar-custom-add-service"},on:{click:function(e){return t.addItem(t.GATT_TYPES.service)}}},[a("q-item-section",[t._v("New Service")])],1),a("q-item",{attrs:{dense:"",clickable:"","data-cy":"btn-button-bar-custom-add-characteristic"},on:{click:function(e){return t.addItem(t.GATT_TYPES.characteristic)}}},[a("q-item-section",[t._v("New Characteristic ")])],1),a("q-item",{attrs:{dense:"",clickable:"","data-cy":"btn-button-bar-custom-add-descriptor"},on:{click:function(e){return t.addItem(t.GATT_TYPES.descriptor)}}},[a("q-item-section",[t._v("New Descriptor ")])],1)],1)],1)],1),a("q-tooltip",{model:{value:t.showTooltip,callback:function(e){t.showTooltip=e},expression:"showTooltip"}},[t._v("Add new item")])],1),a("div",{attrs:{"data-cy":"btn-button-bar-copy"}},[a("q-btn",t._b({attrs:{icon:"mdi-content-copy",disable:!t.duplicateActive},on:{click:function(e){t.duplicateSelectedItem(),t.duplicateItemNotify()}}},"q-btn",t.BUTTON_BAR_PROPS,!1)),a("q-tooltip",[t._v("Duplicate selected item")])],1),a("div",{attrs:{"data-cy":"btn-button-bar-move-up"}},[a("q-btn",t._b({attrs:{icon:"mdi-arrow-up",disable:!t.moveUpActive},on:{click:t.moveUpSelectedItem}},"q-btn",t.BUTTON_BAR_PROPS,!1)),a("q-tooltip",[t._v("\n        Move up selected item\n      ")])],1),a("div",{attrs:{"data-cy":"btn-button-bar-move-down"}},[a("q-btn",t._b({attrs:{icon:"mdi-arrow-down",disable:!t.moveDownActive},on:{click:t.moveDownSelectedItem}},"q-btn",t.BUTTON_BAR_PROPS,!1)),a("q-tooltip",[t._v("Move down selected item")])],1),a("q-btn",t._b({attrs:{icon:"mdi-application-import","data-cy":"btn-button-bar-import"},on:{click:function(e){t.uploaderDialog=!0,t.uploaderError=null}}},"q-btn",t.BUTTON_BAR_PROPS,!1),[a("q-tooltip",[t._v("Import")])],1),a("q-btn",t._b({attrs:{outline:!t.sigLayout,icon:"mdi-plus-thick","data-cy":"btn-button-bar-sig"},on:{click:function(e){return t.setSigLayout(!t.sigLayout)}}},"q-btn",t.BUTTON_BAR_PROPS,!1),[a("q-tooltip",[t._v("Toggle - Add Standard Bluetooth GATT items - view")])],1),a("div",{attrs:{"data-cy":"btn-button-bar-remove"}},[a("q-btn",t._b({attrs:{color:"negative",icon:"mdi-close-thick",disable:!t.removeActive},on:{click:function(e){t.deleteConfirm=!0}}},"q-btn",t.BUTTON_BAR_PROPS,!1)),a("q-tooltip",[t._v("Delete selected item")])],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.deleteConfirm,callback:function(e){t.deleteConfirm=e},expression:"deleteConfirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-gutter-md"},[a("q-icon",{attrs:{name:"mdi-alert-circle ",color:"negative",size:"md"}}),a("div",[t._v("\n          Are you sure you want to permanently delete the selected item?\n        ")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"data-cy":"btn-button-bar-remove-pop-up-cancel",flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"data-cy":"btn-button-bar-remove-pop-up-delete",flat:"",label:"Delete",color:"negative"},on:{click:t.removeSelectedItem}})],1)],1)],1),a("q-dialog",{model:{value:t.uploaderDialog,callback:function(e){t.uploaderDialog=e},expression:"uploaderDialog"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("File Importer")])]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"}},[t.uploaderError?a("q-banner",{staticClass:"text-white bg-red"},[t._v("\n          "+t._s(t.uploaderError)+"\n        ")]):a("q-uploader",{attrs:{factory:t.factoryFn,"auto-upload":"",accept:".btconf, .isc, .xml, .bgproj"}})],1),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Close",color:"primary"}})],1)],1)],1)],1)},ne=[],re=(a("07ac"),{getData:function(t){var e="/rest/gattConfigurator/data?id="+t;return Yt["RestApi"].get(e).then((function(t){return t.data}))},getDataMock:function(){var t="/mock/gattconfig.json";return Yt["RestApi"].get(t).then((function(t){return t.data}))},getContributions:function(t){var e="/rest/gattConfigurator/contributions?id="+t;return Yt["RestApi"].get(e).then((function(t){return t.data}))},getContributionsMock:function(){var t="/mock/htm_contribution.json";return Yt["RestApi"].get(t).then((function(t){return t.data}))},getSigInfo:function(t,e,a){var i,n="/rest/gattConfigurator/sig-info?id="+t+"&gatt-type="+e,r=z()(a);try{for(r.s();!(i=r.n()).done;){var s=i.value;n+="&type="+s}}catch(c){r.e(c)}finally{r.f()}return Yt["RestApi"].get(n).then((function(t){return t.data}))},getSigGattItem:function(t,e,a){var i,n="/rest/gattConfigurator/sig-gatt-item?id=".concat(t,"&gatt-type=").concat(e),r=z()(a);try{for(r.s();!(i=r.n()).done;){var s=i.value;n+="&type="+s}}catch(c){r.e(c)}finally{r.f()}return Yt["RestApi"].get(n).then((function(t){return t.data}))},getMarkDown:function(){var t="md/readme.md";return Yt["RestApi"].get(t).then((function(t){return t.data}))},getSigTreeData:function(t){var e="/rest/gattConfigurator/sig-tree-data?id="+t;return Yt["RestApi"].get(e).then((function(t){return t.data}))},getSigTreeDataMock:function(){var t="/mock/sig.json";return Yt["RestApi"].get(t).then((function(t){return t.data}))},setDirty:function(t){var e="/rest/gattConfigurator/dirty?id="+t;return Yt["RestApi"].get(e).then((function(t){return t.data}))},postSave:function(t){var e="/rest/gattConfigurator/save/";return Yt["RestApi"].post(e,t.data,{headers:{editorId:t.id}}).catch((function(t){return window.console.log("data returned ERROR "+t.response.data)}))},postImport:function(t,e){var a="/rest/gattConfigurator/import/";return Yt["RestApi"].post(a,e,{headers:{editorId:t}})}}),se={namespaced:!0,data:function(){return{showTooltip:!1,BUTTON_BAR_PROPS:{color:"primary",outline:!0,dense:!0,size:"sm"},ICONS:E,GATT_TYPES:C,deleteConfirm:!1,uploaderDialog:!1,uploaderError:null}},computed:m()(m()(m()({},Object(g["mapGetters"])("GattConfiguratorApp",["gatt","serviceContributions","capabilityContributions","selectedItem","itemByVueId"])),Object(g["mapGetters"])("MainView",["id","sigLayout"])),{},{newChildActive:function(){return!this.selectedItem.source_file},duplicateActive:function(){return Object.values(C).includes(this.selectedItem.gatt_type)&&this.selectedItem.gatt_type!=C.profile&&!this.selectedItem.source_file||this.selectedItem.source_file&&this.selectedItem.gatt_type==C.service},removeActive:function(){return Object.values(C).includes(this.selectedItem.gatt_type)&&this.selectedItem.gatt_type!=C.profile&&!this.selectedItem.source_file},moveUpActive:function(){if(this.selectedItem.parent&&!this.selectedItem.source_file){var t=this.selectedItem.parent.children;return t.indexOf(this.selectedItem)>0}return!1},moveDownActive:function(){if(this.selectedItem.parent&&!this.selectedItem.source_file){var t=this.selectedItem.parent.children;return t.indexOf(this.selectedItem)<t.length-1}return!1}}),watch:{deleteConfirm:function(){this.setDialogOn(this.deleteConfirm)},uploaderDialog:function(){this.setDialogOn(this.uploaderDialog)}},methods:m()(m()(m()({},Object(g["mapActions"])("GattConfiguratorApp",["setSelectedItem","removeSelectedItem","duplicateSelectedItem","newChildUnderSelectedItem","moveUpSelectedItem","moveDownSelectedItem","addGattItem"])),Object(g["mapActions"])("MainView",["updateData","setDialogOn","setSigLayout"])),{},{addItem:function(t){var e=null;if(t==C.service)e=new Lt;else if(t==C.characteristic)e=new Qt;else{if(t!=C.descriptor)return;e=new $t}this.addGattItem({gattItem:e,gattType:t}),this.$q.notify(Yt["Notifications"].qNotificationHtmlObj(Yt["Notifications"].notificationHtmlMsg(Ht(t))))},factoryFn:function(t){var e=this,a=new FileReader;a.onerror=function(){return e.iscUploadFailed("Error in reading the selected file.")},a.onload=function(){re.postImport(e.id,a.result).catch((function(t){window.console.log("data returned ERROR "+t.response.data),e.importConfigUploadFailed(t.response.data)})).then((function(){return e.importConfigUploaded()}))},a.readAsText(t[0])},importConfigUploaded:function(){var t=this;this.updateData().then((function(){t.uploaderDialog=!1})),this.importNotify()},importConfigUploadFailed:function(t){this.uploaderError=t},duplicateItemNotify:function(){this.$q.notify(Yt["Notifications"].qNotificationHtmlObj(Yt["Notifications"].notificationHtmlMsg(Kt(this.selectedItem.name))))},importNotify:function(){this.$q.notify(Yt["Notifications"].qNotificationHtmlObj(Yt["Notifications"].notificationHtmlMsg(Jt(this.selectedItem.name))))}})},ce=se,oe=a("9c40"),le=a("4e73"),ue=a("1c1c"),de=a("4074"),pe=a("24e8"),fe=a("f09f"),me=a("a370"),ve=a("4b7e"),he=a("54e1"),ge=a("ee89"),be=a("7f67"),_e=Object(N["a"])(ce,ie,ne,!1,null,null,null),ye=_e.exports;L()(_e,"components",{QBtn:oe["a"],QMenu:le["a"],QList:ue["a"],QItem:G["a"],QItemSection:de["a"],QTooltip:ot["a"],QDialog:pe["a"],QCard:fe["a"],QCardSection:me["a"],QIcon:R["a"],QCardActions:ve["a"],QSeparator:te["a"],QBanner:he["a"],QUploader:ge["a"]}),L()(_e,"directives",{ClosePopup:be["a"]});var Ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"column q-gutter-md"},[a("q-card",{staticClass:"card-selected",attrs:{"data-cy":"card-"+t.GATT_TYPES.profile}},[a("div",{staticClass:"row items-center q-gutter-sm q-pt-md"},[a("div",{staticClass:"col-auto"},[a("div",{staticClass:"card-title-block-bar"})]),a("q-icon",{attrs:{name:t.ICONS[t.GATT_TYPES.profile].name,color:t.ICONS[t.GATT_TYPES.profile].color,size:"lg"}}),a("div",{staticClass:"card-title-div"},[a("div",{staticClass:"card-title"},[t._v("\n          "+t._s(t.name)+"\n        ")]),a("i",{staticClass:"text-capitalize card-subtitle"},[t._v("\n          "+t._s(t.GATT_TYPES.profile)+"\n        ")])]),a("div",{staticClass:"col row justify-end items-center q-px-md"},[a("q-btn",{attrs:{icon:"mdi-help",color:"blue",round:"",dense:"",unelevated:"",size:"sm","data-cy":"card-help"},on:{click:function(e){return t.goToMarkdownId("profile")}}})],1)],1),a("div",{staticClass:"row q-pa-md q-col-gutter-md"},[a("div",{staticClass:"column q-col-gutter-md col-md-8 col-sm-12",staticStyle:{"max-width":"350px"}},[a("q-input",t._b({attrs:{label:t.PROFILE_META.name.label,"data-cy":"input-name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},"q-input",t.INPUT_PROPS,!1)),a("VToggle",t._b({attrs:{label:t.PROFILE_META.generic_attribute_service.label,"validation-messages":t.genericAttributeServiceValMsgs,"data-cy":"input-generic-attribute-service"},model:{value:t.generic_attribute_service,callback:function(e){t.generic_attribute_service=e},expression:"generic_attribute_service"}},"VToggle",t.INPUT_PROPS,!1)),a("VToggle",t._b({attrs:{label:t.PROFILE_META.gatt_caching.label,"validation-messages":t.gattCachingValMsgs,"data-cy":"input-gatt-caching"},model:{value:t.gatt_caching,callback:function(e){t.gatt_caching=e},expression:"gatt_caching"}},"VToggle",t.INPUT_PROPS,!1))],1),a("div",{staticClass:"self-start"},[a("CapabilityDeclarations")],1),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-col-gutter-sm"},t._l(t.mergedGatt.services,(function(t){return a("div",{key:t.vueId,staticClass:"col-grow"},[a("SubGattItem",{attrs:{value:t}})],1)})),0)])])])],1)},Ce=[],Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-list",{staticClass:"rounded-borders sub-item-background"},[a("q-item",{staticClass:"rounded-borders q-pr-sm",attrs:{clickable:""},on:{click:function(e){return t.setSelectedItem(t.value)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:t.ICONS[t.value.gatt_type].name,color:t.ICONS[t.value.gatt_type].color,size:"lg"}})],1),a("q-item-section",[a("q-item-label",[a("b",[t._v(t._s(t.value.name))]),t.value.id?a("i",[t._v(t._s(" - "+t.value.id))]):t._e()]),a("q-item-label",{staticClass:"q-gutter-xs",attrs:{caption:""}},[""!=t.value.uuid?a("q-badge",{attrs:{color:"accent"}},[t._v("\n          "+t._s(t.value.uuid)+"\n        ")]):t._e(),""!=t.value.type?a("q-badge",{attrs:{color:"primary"}},[t._v("\n          "+t._s(t.value.type)+"\n        ")]):t._e(),null==t.value.source_file?a("q-badge",{staticClass:"text-primary",attrs:{color:"transparent"}},[a("q-icon",{staticClass:"q-pr-xs",attrs:{name:"mdi-pencil"}}),t._v("\n          Edit\n        ")],1):t._e()],1)],1)],1),t.value.children&&0!=t.value.children.length?a("q-item",{staticClass:"sub-item-background"},[a("div",{staticClass:"row"},t._l(t.value.children,(function(e){return a("q-chip",{key:e.vueId,staticClass:"chip-background",attrs:{dense:"",clickable:""},on:{click:function(a){return t.setSelectedItem(e)}}},[a("q-avatar",{attrs:{color:t.ICONS[e.gatt_type].color,"text-color":"white"}},[t._v("\n          "+t._s(e.gatt_type[0].toUpperCase())+"\n        ")]),t._v("\n        "+t._s(e.name)+"\n        "),null==t.value.source_file?a("q-badge",{staticClass:"text-primary",attrs:{color:"transparent"}},[a("q-icon",{staticClass:"q-px-sm",attrs:{name:"mdi-pencil"}}),t._v("\n          Edit\n        ")],1):t._e()],1)})),1)]):t._e()],1)},we=[],Se={namespaced:!0,props:{value:{type:Object,required:!0}},data:function(){return{ICONS:E}},methods:m()({},Object(g["mapActions"])("GattConfiguratorApp",["setSelectedItem"]))},Ee=Se,Oe=(a("8c66"),a("0170")),qe=a("58a81"),ke=a("b047"),Ae=a("cb32"),xe=Object(N["a"])(Ee,Te,we,!1,null,null,null),Pe=xe.exports;L()(xe,"components",{QList:ue["a"],QItem:G["a"],QItemSection:de["a"],QIcon:R["a"],QItemLabel:Oe["a"],QBadge:qe["a"],QChip:ke["a"],QAvatar:Ae["a"]});var Me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-markup-table",{class:{"alert-error-border":"error"==t.validationMessages.type,"alert-warning-border":"warning"==t.validationMessages.type},attrs:{flat:"",bordered:"",dense:""}},[a("thead",[a("tr",[a("th",{staticClass:"text-left text-h6",attrs:{colspan:"1"}},[t._v("\n        "+t._s(t.PROFILE_META.capability_declarations.label)+"\n      ")]),a("th",{staticClass:"text-right",attrs:{colspan:"2"}},[a("q-btn",t._b({attrs:{round:!1,"no-caps":"",color:"primary","data-cy":"add-capability-declaration"},on:{click:t.addCapabilityDeclaration}},"q-btn",t.ICON_BUTTON_PROPS,!1),[a("q-icon",{attrs:{name:"mdi-plus-thick",size:"xs"}}),t._v("Add\n        ")],1)],1),a("th",[a("ValidationMarker",t._b({attrs:{placeholder:""}},"ValidationMarker",t.validationMessages,!1))],1)]),a("tr",{directives:[{name:"show",rawName:"v-show",value:!!t.mergedGatt.capability_declarations.length,expression:"!!mergedGatt.capability_declarations.length"}]},[a("th",[t._v(t._s(t.PROFILE_META.capability_declarations.column_labels.name))]),a("th",[t._v(t._s(t.PROFILE_META.capability_declarations.column_labels.enable))]),a("th"),a("th")])]),a("tbody",t._l(t.mergedGatt.capability_declarations,(function(e,i){return a("CapabilityDeclarationRow",{key:i,attrs:{capability_declaration:e,"data-cy":"capability-declaration"},on:{delete:function(e){return t.removeArrayItem({array_object:t.gatt.capability_declarations,index:i})}}})})),1)])},De=[],Ve=(a("4de4"),a("eca4")),Ne=a("dbdd"),Re=(a("2b3d"),a("ff52")),Ge=function(t){var e=new URL(window.location.href),a=e.searchParams.get("id");function i(e){var a=new WebSocket("ws://"+window.location.host+"/ws/gattConfigurator/"+e);function n(){a&&(Ot["a"].info("Socket: Connection safe close"),a.onclose=function(){},a.close())}a.onopen=function(){return Ot["a"].info("Socket: Connection opened")},a.onclose=function(){Ot["a"].info("Socket: Connection closed"),setTimeout((function(){Ot["a"].info("Socket: Attempting reconnect"),i(e)}),3e3)},a.onmessage=function(a){var i=a.data;if(Ot["a"].info("Message received: "+i),"save"==i)re.postSave({id:e,data:new kt(t.getters["GattConfiguratorApp/gatt"])}),t.dispatch("MainView/setDirty",!1,{root:!0});else if("themeDark"==i)Re["a"].set(!0);else if("themeLight"==i)Re["a"].set(!1);else try{var n=JSON.parse(i);if("addServiceContribution"==n.method){var r=n.params.source_file,s=new jt(m()(m()({},n.params.gatt),{},{source_file:r}));t.dispatch("GattConfiguratorApp/addContribution",{source_file:r,gatt:s})}else"removeServiceContribution"==n.method&&t.dispatch("GattConfiguratorApp/removeContribution",n.params.source_file)}catch(c){Ot["a"].error(c.message)}},window.addEventListener("beforeunload",(function(){n()}))}function n(e){Ot["a"].info("ID: "+e),t.dispatch("MainView/setId",e,{root:!0}),re.getData(e).then((function(a){Ot["a"].info("Studio data:"),Ot["a"].info(a,!0),Ot["a"].info("Server: "+window.location.host),i(e),t.dispatch("MainView/setData",a)})),re.getContributions(e).then((function(e){t.dispatch("MainView/setContributions",e)})),t.watch((function(){return t.getters["MainView/dirty"]}),(function(a){a&&re.setDirty(e).then((function(e){"ok"!=e&&t.dispatch("MainView/setDirty",!1)}))}))}re.getMarkDown().then((function(e){t.dispatch("Markdown/setMarkdownContent",e,{root:!0})})),a?n(a):(re.getDataMock().then((function(e){Ot["a"].info("Mock data:"),Ot["a"].info(e,!0),t.dispatch("MainView/setData",e,{root:!0})})),re.getContributionsMock().then((function(e){Ot["a"].info("Mock contribute:"),Ot["a"].info(e,!0),t.dispatch("MainView/setContributions",e)}))),window.DarkToggle=function(){Re["a"].toggle()}},je=Ge,Ue=["read","write","reliable_write","write_no_response","notify","indicate"],Le=["read","write"],Qe={id:"none",dirty:!1,ready:!1,sigLayout:!1,dialogOn:!1},$e={id:function(t){return t.id},ready:function(t){return t.ready},dirty:function(t){return t.dirty},sigLayout:function(t){return t.sigLayout},dialogOn:function(t){return t.dialogOn}};function Be(t){t.services.forEach((function(t){t.characteristics.forEach((function(t){t.permissions=Ye(t.properties,Ue),t.descriptors.forEach((function(t){t.permissions=Ye(t.properties,Le)}))}))}))}function Ye(t,e){var a={};return e.forEach((function(e){var i,n,r;switch(e){case"read":r="read";break;case"write":case"reliable_write":case"write_no_response":r="write";break;case"notify":case"indicate":r="notify";break}null!==(n=a[i=r])&&void 0!==n||(a[i]=new Gt);var s,c,o,l=t[e];l?((s=a[r]).authenticated||(s.authenticated=!!l.authenticated),(c=a[r]).bonded||(c.bonded=!!l.bonded),(o=a[r]).encrypted||(o.encrypted=!!l.encrypted),a[r].properties[e]=l.enable):a[r].properties[e]=!1})),a}var Fe={setId:function(t,e){var a=t.commit;a("SET_ID",e)},setReady:function(t,e){var a=t.commit;a("SET_READY",e)},setDirty:function(t,e){var a=t.commit,i=t.state;i.dirty!=e&&a("SET_DIRTY",e)},setSigLayout:function(t,e){var a=t.commit;a("SET_SIG_LAYOUT",e)},setDialogOn:function(t,e){var a=t.commit;a("SET_DIALOG_ON",e)},setData:function(t,e){var a=t.commit,i=t.dispatch;Be(e);var n=new jt(e);null!=n.upgrade_results&&n.upgrade_results.length>0&&(a("SET_DIRTY",!0),a("UpgradeRule/SET_UPGRADE_DIALOG_ON",!0,{root:!0})),a("GattConfiguratorApp/SET_GATT",n,{root:!0}),a("GattConfiguratorApp/SET_SELECTED_ITEM",n,{root:!0}),a("SET_READY",!0),i("setSigTreeData")},setContributions:function(t,e){var a=t.dispatch;for(var i in e)if(e[i]){var n=new jt(m()(m()({},e[i]),{},{source_file:i}));a("GattConfiguratorApp/addContribution",{source_file:i,gatt:n},{root:!0})}},updateData:function(t){var e=t.commit,a=t.getters,i=t.dispatch;re.getData(a.id).then((function(t){0!=t.length&&(e("SET_DIRTY",!0),i("setData",t))}))},setSigTreeData:function(t){var e=t.getters,a=t.dispatch;"none"!=e.id?(Ot["a"].time("sig"),re.getSigTreeData(e.id).then((function(t){0!=t.length&&(a("Sig/setSigTreeData",t,{root:!0}),Ot["a"].timeEnd("sig"))}))):(Ot["a"].time("sig"),re.getSigTreeDataMock().then((function(t){0!=t.length&&(a("Sig/setSigTreeData",t,{root:!0}),Ot["a"].timeEnd("sig"))})))}},ze={SET_ID:function(t,e){t.id=e},SET_READY:function(t,e){t.ready=e},SET_DIRTY:function(t,e){t.dirty=e},SET_SIG_LAYOUT:function(t,e){t.sigLayout=e},SET_DIALOG_ON:function(t,e){t.dialogOn=e}},We={namespaced:!0,state:Qe,getters:$e,actions:Fe,mutations:ze};a("0481");function He(t,e){if(t.children&&e.children){var a,i=t.children,n=e.children,r=z()(i);try{var s=function(){var t=a.value;if(t.instance_id){var i=n.findIndex((function(e){return e.instance_id==t.instance_id}));if(-1!=i)return He(t,n[i]),"continue"}t.parent=e,n.push(t)};for(r.s();!(a=r.n()).done;)s()}catch(c){r.e(c)}finally{r.f()}}}var Ke={gatt:null,contributions:{},selectedItem:null},Je={gatt:function(t){return t.gatt},selectedItem:function(t){return t.selectedItem},itemByVueId:function(t,e){return function(a){if(t.gatt.vueId==a)return t.gatt;var i,n=z()(e.mergedGatt.services);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r.vueId==a)return r;var s,c=z()(r.characteristics);try{for(c.s();!(s=c.n()).done;){var o=s.value;if(o.vueId==a)return o;var l,u=z()(o.descriptors);try{for(u.s();!(l=u.n()).done;){var d=l.value;if(d.vueId==a)return d}}catch(p){u.e(p)}finally{u.f()}}}catch(p){c.e(p)}finally{c.f()}}}catch(p){n.e(p)}finally{n.f()}}},serviceContributions:function(t){Ot["a"].debug("contributions"),Ot["a"].debug(t.contributions,!0);var e,a=new jt,i=z()(Object.keys(t.contributions).sort());try{for(i.s();!(e=i.n()).done;){var n=e.value;He(new jt(t.contributions[n]),a)}}catch(r){i.e(r)}finally{i.f()}return a.services.forEach((function(e){return e.parent=t.gatt})),a.services},capabilityContributions:function(t){for(var e=Object.keys(t.contributions).sort().map((function(e){return t.contributions[e].capability_declarations})).flat(),a=function(t){e.findIndex((function(a){return a.name==e[t].name}))!=t&&e.splice(t,1)},i=e.length-1;i>=0;i--)a(i);return e},mergedGatt:function(t,e){var a=[].concat(H()(t.gatt.services),H()(e.serviceContributions)),i=[].concat(H()(t.gatt.capability_declarations),H()(e.capabilityContributions));return Object.assign(new jt,m()(m()({},t.gatt),{},{services:a,children:a,capability_declarations:i}))},serviceIds:function(t,e){return[].concat(H()(t.gatt.services),H()(e.serviceContributions)).map((function(t){return t.id})).filter((function(t){return!!t}))},capabilityDeclarationNames:function(t,e){return[].concat(H()(t.gatt.capability_declarations),H()(e.capabilityContributions)).map((function(t){return t.name}))}},Ze={setSelectedItem:function(t,e){var a=t.commit;a("SET_SELECTED_ITEM",e)},setGatt:function(t,e){var a=t.commit;a("SET_GATT",e)},setValue:function(t,e){var a=t.commit,i=t.dispatch;a("SET_VALUE",e),i("MainView/setDirty",!0,{root:!0})},setValueNoDirty:function(t,e){var a=t.commit;a("SET_VALUE",e)},setChildren:function(t,e){var a=t.commit,i=t.dispatch;a("SET_CHILDREN",e),i("MainView/setDirty",!0,{root:!0})},removeSelectedItem:function(t){var e=t.commit,a=t.dispatch;e("REMOVE_SELECTED_ITEM"),a("MainView/setDirty",!0,{root:!0})},duplicateSelectedItem:function(t){var e=t.commit,a=t.dispatch;e("DUPLICATE_SELECTED_ITEM"),a("MainView/setDirty",!0,{root:!0})},newChildUnderSelectedItem:function(t){var e=t.commit,a=t.dispatch;e("NEW_CHILD_UNDER_SELECTED_ITEM"),a("MainView/setDirty",!0,{root:!0})},moveUpSelectedItem:function(t){var e=t.commit,a=t.dispatch;e("MOVE_UP_SELECTED_ITEM"),a("MainView/setDirty",!0,{root:!0})},moveDownSelectedItem:function(t){var e=t.commit,a=t.dispatch;e("MOVE_DOWN_SELECTED_ITEM"),a("MainView/setDirty",!0,{root:!0})},addGattItem:function(t,e){var a=t.commit,i=t.dispatch;a("ADD_GATT_ITEM",e),i("MainView/setDirty",!0,{root:!0})},addContribution:function(t,e){var a=t.commit,i=e.source_file,n=e.gatt;a("ADD_CONTRIBUTION",{source_file:i,gatt:n})},removeContribution:function(t,e){var a=t.commit;a("REMOVE_CONTRIBUTION",e)},addArrayItem:function(t,e){var a=t.commit,i=t.dispatch;a("ADD_ARRAY_ITEM",e),i("MainView/setDirty",!0,{root:!0})},removeArrayItem:function(t,e){var a=t.commit,i=t.dispatch;a("REMOVE_ARRAY_ITEM",e),i("MainView/setDirty",!0,{root:!0})},maintainCapabilities:function(t,e){var a=t.commit,i=t.getters;a("MAINTAIN_CAPABILITIES",m()({capabilityDeclarationNames:i.capabilityDeclarationNames},e))},maintainServiceIncludes:function(t,e){var a=t.commit,i=t.getters;a("MAINTAIN_SERVICE_INCLUDES",m()({serviceIds:i.serviceIds},e))}},Xe={SET_GATT:function(t,e){t.gatt=e},SET_SELECTED_ITEM:function(t,e){t.selectedItem=e},SET_VALUE:function(t,e){var a=e.object,i=e.key,n=e.value;a[i]=n},SET_CHILDREN:function(t,e){var a=e.object,i=e.children;a.children=i},REMOVE_SELECTED_ITEM:function(t){if(t.selectedItem["parent"]){var e=t.selectedItem.parent,a=e.children,i=a.indexOf(t.selectedItem),n=a.length-1;t.selectedItem=0==n?e:i<n?a[i+1]:a[i-1],a.splice(i,1)}},DUPLICATE_SELECTED_ITEM:function(t){var e=t.selectedItem.parent,a=e.children;switch(t.selectedItem.gatt_type){case C.service:a.push(new Lt(m()(m()({},t.selectedItem),{},{parent:e})));break;case C.characteristic:a.push(new Qt(m()(m()({},t.selectedItem),{},{parent:e})));break;case C.descriptor:a.push(new $t(m()(m()({},t.selectedItem),{},{parent:e})));break;default:break}},NEW_CHILD_UNDER_SELECTED_ITEM:function(t){var e=t.selectedItem.children;switch(t.selectedItem.gatt_type){case C.profile:e.push(new Lt({parent:t.selectedItem}));break;case C.service:e.push(new Qt({parent:t.selectedItem}));break;case C.characteristic:e.push(new $t({parent:t.selectedItem}));break;default:break}},MOVE_UP_SELECTED_ITEM:function(t){var e=t.selectedItem,a=e.parent.children,i=a.indexOf(e);i>0&&(a.splice(i,1),a.splice(i-1,0,e))},MOVE_DOWN_SELECTED_ITEM:function(t){var e=t.selectedItem,a=e.parent.children,i=a.indexOf(e);i+1<a.length&&(a.splice(i,1),a.splice(i+1,0,e))},ADD_GATT_ITEM:function(t,e){var a=e.gattType,i=e.gattItem;if(null!=a)if(null!=i){var n=t.gatt,r=t.selectedItem;switch(a){case C.profile:var s,c=z()(i.services);try{for(c.s();!(s=c.n()).done;){var o=s.value;n.services.push(new Lt(m()(m()({},o),{},{parent:n})))}}catch(l){c.e(l)}finally{c.f()}break;case C.service:n.services.push(new Lt(m()(m()({},i),{},{parent:n})));break;case C.characteristic:if(null!=r.source_file)break;switch(r.gatt_type){case C.profile:0==n.services.length&&n.services.push(new Lt({parent:n})),n.services[0].characteristics.push(new Qt(m()(m()({},i),{},{parent:n.services[0]})));break;case C.service:r.characteristics.push(new Qt(m()(m()({},i),{},{parent:r})));break;case C.characteristic:r.parent.characteristics.push(new Qt(m()(m()({},i),{},{parent:r.parent})));break;case C.descriptor:r.parent.parent.characteristics.push(new Qt(m()(m()({},i),{},{parent:r.parent.parent})));break}break;case C.descriptor:if(null!=r.source_file)break;switch(r.gatt_type){case C.profile:0==n.services.length&&n.services.push(new Lt({parent:n})),0==n.services[0].characteristics.length&&n.services[0].characteristics.push(new Qt({parent:n.services[0]})),n.services[0].characteristics[0].descriptors.push(new $t(m()(m()({},i),{},{parent:n.services[0].characteristics[0]})));break;case C.service:0==r.characteristics.length&&r.characteristics.push(new Qt({parent:r})),r.characteristics[0].descriptors.push(new $t(m()(m()({},i),{},{parent:r.characteristics[0]})));break;case C.characteristic:r.descriptors.push(new $t(m()(m()({},i),{},{parent:r})));break;case C.descriptor:r.parent.descriptors.push(new $t(m()(m()({},i),{},{parent:r.parent})));break}break}}else Ot["a"].error("SIG Gatt item is null");else Ot["a"].error("Gatt type is null")},ADD_CONTRIBUTION:function(t,e){var a=e.source_file,i=e.gatt;i.services.forEach((function(e){e.parent=t.gatt})),r["default"].set(t.contributions,a,i)},REMOVE_CONTRIBUTION:function(t,e){r["default"].delete(t.contributions,e)},ADD_ARRAY_ITEM:function(t,e){var a=e.array_object,i=e.item;a.push(i)},REMOVE_ARRAY_ITEM:function(t,e){var a=e.array_object,i=e.index;a.splice(i,1)},MAINTAIN_CAPABILITIES:function(t,e){var a=e.capabilityDeclarationNames,i=e.oldVal,n=void 0===i?null:i,r=e.newVal,s=void 0===r?null:r;t.gatt.accept({visit:function(t){if(t.capabilities){if(n&&s){var e=t.capabilities.indexOf(n);-1!==e&&(t.capabilities[e]=s)}t.gatt_type==C.characteristic&&t.parent.capabilities.length>0?t.capabilities=t.capabilities.filter((function(e){return t.parent.capabilities.includes(e)})):t.capabilities=t.capabilities.filter((function(t){return a.includes(t)}))}}})},MAINTAIN_SERVICE_INCLUDES:function(t,e){var a,i=e.serviceIds,n=e.oldVal,r=void 0===n?null:n,s=e.newVal,c=void 0===s?null:s,o=z()(t.gatt.services);try{for(o.s();!(a=o.n()).done;){var l=a.value;if(r&&c){var u=l.includes.indexOf(r);-1!==u&&(l.includes[u]=c)}l.includes=l.includes.filter((function(t){return i.includes(t)}))}}catch(d){o.e(d)}finally{o.f()}}},ta={namespaced:!0,state:Ke,getters:Je,actions:Ze,mutations:Xe};a("a630"),a("25f0");function ea(t){var e=this,a=t.name,i=t.type,n=t.source,r=void 0===n?null:n,s=t.services,c=void 0===s?[]:s;this.name=a,this.type=i,this.source=r,this.services=c.map((function(t){return new aa(t,e)})),this.vueId=Object(qt["a"])(),this.children=this.services,this.services.forEach((function(t){return t["vueId"]=Object(qt["a"])()}))}function aa(t){var e=this,a=t.name,i=t.type,n=t.source,r=void 0===n?null:n,s=t.characteristics,c=void 0===s?[]:s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.name=a,this.type=i,this.source=r,this.characteristics=c.map((function(t){return new ia(t,e)})),this.vueId=Object(qt["a"])(),this.parent=o,this.children=this.characteristics}function ia(t){var e=this,a=t.name,i=t.type,n=t.source,r=void 0===n?null:n,s=t.descriptors,c=void 0===s?[]:s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.name=a,this.type=i,this.source=r,this.descriptors=c.map((function(t){return new na(t,e)})),this.vueId=Object(qt["a"])(),this.parent=o,this.children=this.descriptors}function na(t){var e=t.name,a=t.type,i=t.source,n=void 0===i?null:i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.name=e,this.type=a,this.source=n,this.vueId=Object(qt["a"])(),this.parent=r}ea.prototype.gatt_type=C.profile,aa.prototype.gatt_type=C.service,ia.prototype.gatt_type=C.characteristic,na.prototype.gatt_type=C.descriptor;var ra={sigTreeData:null,draggedItemPromise:null},sa={sigTreeData:function(t){return t.sigTreeData},draggedItemPromise:function(t){return t.draggedItemPromise},sources:function(t){for(var e=new Set,a=0,i=Object.values(t.sigTreeData);a<i.length;a++){var n,r=i[a],s=z()(r);try{for(s.s();!(n=s.n()).done;){var c=n.value;e.add(c.source)}}catch(o){s.e(o)}finally{s.f()}}return Array.from(e)}},ca={setSigTreeData:function(t,e){var a=t.commit,i={profiles:e.profiles.map((function(t){return new ea(t)})),services:e.services.map((function(t){return new aa(t)})),characteristics:e.characteristics.map((function(t){return new ia(t)})),descriptors:e.descriptors.map((function(t){return new na(t)}))};Ot["a"].info("setSigTreeData");var n="setSigTreeData:\n        SIG profiles: "+i.profiles.length.toString()+"\n        SIG services: "+i.services.length.toString()+"\n        SIG characteristics: "+i.characteristics.length.toString()+"\n        SIG descriptors: "+i.descriptors.length.toString();Ot["a"].info(n),a("SET_SIG_TREE_DATA",i)},setDraggedItemPromise:function(t,e){var a=t.commit;a("SET_DRAGGED_ITEM_PROMISE",e)}},oa={SET_SIG_TREE_DATA:function(t,e){t.sigTreeData=e},SET_DRAGGED_ITEM_PROMISE:function(t,e){t.draggedItemPromise=e}},la={namespaced:!0,state:ra,getters:sa,actions:ca,mutations:oa},ua=a("f174"),da=a.n(ua);r["default"].use(g["default"]),r["default"].use(da.a);var pa=new g["default"].Store({modules:{Markdown:Ne["WaspMarkdownStore"],UpgradeRule:Ve["UpgradeRule"],MainView:We,GattConfiguratorApp:ta,Sig:la},plugins:[je],strict:!1}),fa=pa;a("fb6a");function ma(t){return Object.values(t).some((function(t){return!!t}))}function va(){this.isValueLengthNotNull=new ei(Fa,"Calculated length, Initial Value's length will be used.",["value_$_length"],Ga),this.isValueHexLengthValid=new ei(za,"Value length is greater than the length (*2) property. Value will be truncated.",["value_$_init_value","value_$_length"],ja),this.isValidInitialValueHexForm=new ei(Wa,"Value is not a proper hex! Digit count has to be even.",["value_$_init_value"],Ra),this.isValidValueLength=new ei(Wa,"Value is not a positive integer!",["value_$_length"],Ua),this.isNoneUserTypeValueMaxLengthValid=new ei(Wa,"Value length for NONE USER types should be between 0-255",["value_$_length"],Qa),this.isValueUTF8LengthValid=new ei(za,"Initial Value length is greater than the length property. Value will be truncated.",["value_$_init_value","value_$_length"],$a),this.isValueHEXMinLengthValid=new ei(Fa,"Initial Value length is less than the length property. Padding data will be added.",["value_$_init_value","value_$_length"],Ba),this.isValueUTF8MinLengthValid=new ei(Fa,"Initial Value length is less than the length property. Padding data will be added.",["value_$_init_value","value_$_length"],Ya),this.hasInitialValueWhenLengthNull=new ei(Wa,"Initial Value is compulsory when the length attribute is 0.",["value_$_init_value"],La),this.isValidUUID=wa()}function ha(){this.isCapabilityDeclarationNameUnique=new ei(Wa,"Capability Declaration names are not unique!",["capability_declarations"],Ea),this.isCapabilityDeclarationNameValid=new ei(Wa,"Only alphanumeric and '_' characters are allowed.",["capability_declarations"],Oa),this.isNotExceededMaxNoOfCapabilityDeclarations=new ei(Wa,"The maximum number of Capabilities is 16.",["capability_declarations"],qa),this.isGattCachingValueValid=new ei(za,"GATT Caching only allowed, when Generic Attribute Service is enabled. This setting will be ignored.",["gatt_caching","generic_attribute_service"],ka)}function ga(){this.isServiceIdUnique=new ei(Wa,"Service ID is not unique!",["id"],Aa),this.isValidUUID=wa()}function ba(){Object.assign(this,new va),this.hasPropertyEnabled=new ei(Wa,"At least one property should be configured.",["properties"],Pa),this.propertyForPersmissionIsSelected=new ei(za,"Property was not selected for permissions",["properties"],Da),this.isConstantAndWriteEnabledCharacteristic=new ei(Wa,"Write properties are not applicable for constant values.",["properties"],xa),this.isValidUUID=wa()}function _a(){Object.assign(this,new va),this.hasPropertyEnabled=new ei(Wa,"At least one property should be configured.",["properties"],Pa),this.propertyForPersmissionIsSelected=new ei(za,"Property was not selected for permissions",["properties"],Ma),this.isConstantAndWriteEnabledDescriptor=new ei(Wa,"Write properties are not applicable for constant values.",["properties"],Na)}function ya(t){var e=/^[0-9a-f]{4}$/i,a=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;return e.test(t)||a.test(t)}function Ia(t){var e=/^([0-9a-f]{2})+$/gim;return e.test(t)}function Ca(t){var e=/^(0|[1-9]\d*)$/gim;return e.test(t)}function Ta(t){var e=/^([_a-z][_0-9a-z]*)$/gim;return e.test(t)}var wa=function(){return new ei(Wa,"Invalid UUID value. It should be a 16-bit or 128-bit UUID number.",["uuid"],Sa)};function Sa(){return void 0===this.gattItem||void 0===this.gattItem.uuid||this.gattItem.uuid.length>0&&ya(this.gattItem.uuid)}function Ea(){var t=!0,e=this.$store.getters["GattConfiguratorApp/capabilityDeclarationNames"];if(e){var a,i=z()(e);try{var n=function(){var i=a.value;if(e.filter((function(t){return t==i})).length>1)return t=!1,"break"};for(i.s();!(a=i.n()).done;){var r=n();if("break"===r)break}}catch(s){i.e(s)}finally{i.f()}}return t}function Oa(){var t=!0,e=this.$store.getters["GattConfiguratorApp/capabilityDeclarationNames"];if(e){var a,i=z()(e);try{for(i.s();!(a=i.n()).done;){var n=a.value;if(!Ta(n)){t=!1;break}}}catch(r){i.e(r)}finally{i.f()}}return t}function qa(){var t=!0,e=this.$store.getters["GattConfiguratorApp/capabilityDeclarationNames"];return e&&e.length>16&&(t=!1),t}function ka(){var t=!0;return this.gattItem.gatt_caching&&!this.gattItem.generic_attribute_service&&(t=!1),t}function Aa(){var t=this,e=!0,a=this.$store.getters["GattConfiguratorApp/serviceIds"];return a&&a.filter((function(e){return e==t.gattItem.id})).length>1&&(e=!1),e}function xa(){var t=!0;return this.gattItem.value.constant&&ma(this.gattItem.permissions.write.properties)&&(t=!1),t}function Pa(){var t=!1;for(var e in this.gattItem.permissions){var a=this.gattItem.permissions[e];if(ma(a.properties)){t=!0;break}}return t}function Ma(){return Va(this.gattItem,["read","write"])}function Da(){return Va(this.gattItem,["read","write","notify"])}function Va(t,e){for(var a=!0,i=0;i<e.length;i++){var n=e[i],r=t.permissions[n],s=r.authenticated,c=r.bonded,o=r.encrypted,l=r.properties;if((s||c||o)&&!ma(l)){a=!1;break}}return a}function Na(){var t=!0;return this.gattItem.value.constant&&this.gattItem.permissions.write.properties.write&&(t=!1),t}function Ra(){var t=!0;return"value"in this.gattItem&&"type"in this.gattItem["value"]&&"length"in this.gattItem["value"]&&"init_value"in this.gattItem["value"]&&"hex"===this.gattItem["value"]["type"]&&(t=this.gattItem.value.length>0&&0==this.gattItem.value.init_value.length||Ia(this.gattItem.value.init_value)),t}function Ga(){return null!=this.gattItem.value.length}function ja(){var t=!0;if("hex"===this.gattItem["value"]["type"]&&Ca(this.gattItem.value.length)){var e=this.gattItem.value.init_value;e.startsWith("0x")&&(e=e.slice(2)),this.gattItem.value.length>0&&(t=e.length<=2*this.gattItem.value.length)}return t}function Ua(){var t=!0;return null!=this.gattItem.value.length&&(t=Ca(this.gattItem.value.length)&&this.gattItem.value.length>0),t}function La(){var t=!0;return"user"==this.gattItem.value.type||0!=this.gattItem.value.length&&null!=this.gattItem.value.length||0!=this.gattItem.value.init_value.length||(t=!1),t}function Qa(){var t=!0;return"user"!=this.gattItem.value.type&&this.gattItem.value.length>255&&(t=!1),t}function $a(){var t=!0;return"utf-8"==this.gattItem.value.type&&this.gattItem.value.length>0&&this.gattItem.value.init_value.length>this.gattItem.value.length&&(t=!1),t}function Ba(){var t=!0;return"hex"==this.gattItem.value.type&&this.gattItem.value.init_value.length<2*this.gattItem.value.length&&(t=!1),t}function Ya(){var t=!0;return"utf-8"==this.gattItem.value.type&&this.gattItem.value.init_value.length<this.gattItem.value.length&&(t=!1),t}var Fa="info",za="warning",Wa="error",Ha=[Wa,za,Fa],Ka="type",Ja="validate",Za="message",Xa="messageKey",ti="validationMessages";function ei(t,e,a,i){this[Ka]=t,this[Za]=e,this[Xa]=a,this[Ja]=i}var ai={profile:new ha,service:new ga,characteristic:new ba,descriptor:new _a};function ii(t,e,a){var i=ai[t.gatt_type];e in i&&function(){var n=i[e],r=JSON.parse(JSON.stringify(t[ti]));if(a){var s,c=z()(n[Xa]);try{for(c.s();!(s=c.n()).done;){var o=s.value;o in r&&(n[Ka]in r[o]&&Array.isArray(r[o][n[Ka]])&&r[o][n[Ka]].length>0&&(r[o][n[Ka]]=r[o][n[Ka]].filter((function(t){return t!=n[Za]})),0==r[o][n[Ka]].length&&delete r[o][n[Ka]]),0==Object.keys(r[o]).length&&delete r[o])}}catch(p){c.e(p)}finally{c.f()}}else{var l,u=z()(n[Xa]);try{for(u.s();!(l=u.n()).done;){var d=l.value;d in r||(r[d]={}),n[Ka]in r[d]||(r[d][n[Ka]]=[]),-1==r[d][n[Ka]].indexOf(n[Za])&&r[d][n[Ka]].push(n[Za])}}catch(p){u.e(p)}finally{u.f()}}fa.dispatch("GattConfiguratorApp/setValueNoDirty",{object:t,key:ti,value:r})}()}function ni(t){var e={type:null,messages:[]},a=t;if(void 0!=a&&Object.keys(a).length>0){var i,n=z()(Ha);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r in a){var s,c=z()(a[r]);try{for(c.s();!(s=c.n()).done;){var o=s.value;e.type=r,e.messages.push(o)}}catch(l){c.e(l)}finally{c.f()}if(e.messages.length>0)return e}}}catch(l){n.e(l)}finally{n.f()}}return e}function ri(t){var e={};for(var a in ai[t])e[a]={get:ai[t][a].validate};return e}var si=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{"auto-width":""}},[a("FreeStyleInput",{attrs:{disabled:!!t.source_file,"comfort-zone":10,"min-width":"200px"},on:{focus:function(e){t.oldName=t.name},input:function(e){t.active=!0},blur:t.onBlur},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{disable:!!t.source_file,dense:""},model:{value:t.enable,callback:function(e){t.enable=e},expression:"enable"}})],1),a("td",[a("q-btn",t._b({attrs:{icon:"mdi-delete",disable:!!t.source_file},on:{click:t.emitDelete}},"q-btn",t.ICON_BUTTON_PROPS,!1))],1),a("td",[t.active?a("ValidationMarker",t._b({attrs:{placeholder:""}},"ValidationMarker",t.validationMessages,!1)):t._e()],1)])},ci=[],oi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("input",t._b({directives:[{name:"autowidth",rawName:"v-autowidth",value:{maxWidth:t.maxWidth,minWidth:t.minWidth,comfortZone:t.comfortZone},expression:"{ maxWidth, minWidth, comfortZone }"}],staticClass:"magic-input",attrs:{type:"text"},domProps:{value:t.value},on:{input:t.onInput,focus:t.onFocus,blur:t.onBlur}},"input",t.$attrs,!1))},li=[],ui={name:"FreeStyleInput",props:{value:{type:String,required:!0},maxWidth:{type:String,default:"none"},minWidth:{type:String,default:"none"},comfortZone:{type:Number,default:0}},methods:{onInput:function(t){this.$emit("input",t.target.value)},onFocus:function(t){this.$emit("focus",t.target.value)},onBlur:function(t){this.$emit("blur",t.target.value)}}},di=ui,pi=(a("9633"),Object(N["a"])(di,oi,li,!1,null,null,null)),fi=pi.exports;function mi(t,e){var a,i={},n=z()(e);try{var r=function(){var e=a.value;i[e]={get:function(){return this[t][e]},set:function(a){var i=this[t];this.setValue({object:i,key:e,value:a})}}};for(n.s();!(a=n.n()).done;)r()}catch(s){n.e(s)}finally{n.f()}return i}var vi={components:{FreeStyleInput:fi,ValidationMarker:Ct},props:{capability_declaration:{type:Object,required:!0}},data:function(){return{ICON_BUTTON_PROPS:w,oldName:null,active:!1}},computed:m()(m()(m()({},mi("capability_declaration",["name","source_file","enable"])),Object(g["mapGetters"])("GattConfiguratorApp",["mergedGatt"])),{},{validationMessages:function(){return ni(this.mergedGatt.validationMessages.capability_declarations)}}),methods:m()(m()({},Object(g["mapActions"])("GattConfiguratorApp",["setValue","maintainCapabilities"])),{},{emitDelete:function(){this.$emit("delete")},onBlur:function(){"error"==this.validationMessages.type?this.name=this.oldName:this.maintainCapabilities({oldVal:this.oldName,newVal:this.name}),this.active=!1}})},hi=vi,gi=a("8f8e"),bi=Object(N["a"])(hi,si,ci,!1,null,null,null),_i=bi.exports;L()(bi,"components",{QCheckbox:gi["a"],QBtn:oe["a"]});var yi={components:{CapabilityDeclarationRow:_i,ValidationMarker:Ct},data:function(){return{ICON_BUTTON_PROPS:w,PROFILE_META:O,capDecNameTmpOnFocus:null,capDecNameTmpActive:null}},computed:m()(m()({},Object(g["mapGetters"])("GattConfiguratorApp",["gatt","mergedGatt","capabilityDeclarationNames"])),{},{validationMessages:function(){return ni(this.mergedGatt.validationMessages.capability_declarations)}}),methods:m()(m()({},Object(g["mapActions"])("GattConfiguratorApp",["addArrayItem","removeArrayItem","maintainCapabilities"])),{},{addCapabilityDeclaration:function(){this.capabilityDeclarationNames.length<16&&this.addArrayItem({array_object:this.gatt.capability_declarations,item:{name:this.freeFeatureName(),enable:!1}})},freeFeatureName:function(){for(var t,e=1;e<=16;e++){var a,i="feature_"+e,n=z()(this.gatt.capability_declarations);try{for(n.s();!(a=n.n()).done;){var r=a.value.name;if(0==i.localeCompare(r)){t=!0;break}t=!1}}catch(s){n.e(s)}finally{n.f()}if(!t)return i}return"feature"}})},Ii=yi,Ci=a("2bb1"),Ti=Object(N["a"])(Ii,Me,De,!1,null,null,null),wi=Ti.exports;L()(Ti,"components",{QMarkupTable:Ci["a"],QBtn:oe["a"],QIcon:R["a"]});var Si=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-between"},[a("q-toggle",t._b({attrs:{"data-cy":t.dataCy},on:{input:t.onInput}},"q-toggle",t.$attrs,!1)),a("ValidationMarker",t._b({attrs:{placeholder:""}},"ValidationMarker",t.validationMessages,!1))],1)},Ei=[],Oi={namespaced:!0,components:{ValidationMarker:Ct},props:{validationMessages:{required:!1,type:Object,default:function(){return{type:null,messages:null}}},dataCy:{type:String,required:!0}},methods:{onInput:function(t){this.$emit("input",t)}}},qi=Oi,ki=a("9564"),Ai=Object(N["a"])(qi,Si,Ei,!1,null,null,null),xi=Ai.exports;L()(Ai,"components",{QToggle:ki["a"]});var Pi={namespaced:!0,components:{SubGattItem:Pe,CapabilityDeclarations:wi,VToggle:xi},data:function(){return{PROFILE_META:O,GATT_TYPES:C,INPUT_PROPS:T,ICONS:E}},computed:m()(m()({},Object(g["mapGetters"])("GattConfiguratorApp",["gatt","mergedGatt"])),{},{name:{get:function(){return this.gatt.name},set:function(t){this.setValue({object:this.gatt,key:"name",value:t})}},generic_attribute_service:{get:function(){return this.gatt.generic_attribute_service},set:function(t){this.setValue({object:this.gatt,key:"generic_attribute_service",value:t})}},gatt_caching:{get:function(){return this.gatt.gatt_caching},set:function(t){this.setValue({object:this.gatt,key:"gatt_caching",value:t})}},genericAttributeServiceValMsgs:function(){return ni(this.gatt.validationMessages.generic_attribute_service)},gattCachingValMsgs:function(){return ni(this.gatt.validationMessages.gatt_caching)}}),methods:m()(m()({},Object(g["mapActions"])("Markdown",["goToMarkdownId"])),Object(g["mapActions"])("GattConfiguratorApp",["setValue"]))},Mi=Pi,Di=a("27f9"),Vi=Object(N["a"])(Mi,Ie,Ce,!1,null,null,null),Ni=Vi.exports;L()(Vi,"components",{QCard:fe["a"],QIcon:R["a"],QBtn:oe["a"],QInput:Di["a"]});var Ri=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"column q-gutter-md"},t._l(t.mergedGatt.services,(function(e){return a("Service",{key:e.vueId,staticClass:"card",class:{"card-selected":e.vueId==t.selectedItem.vueId},attrs:{id:e.vueId,service:e}})})),1)},Gi=[],ji=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{attrs:{"data-cy":"card-"+t.GATT_TYPES.service}},[a("div",{staticClass:"row items-center q-gutter-sm q-pt-md"},[a("div",{staticClass:"col-auto"},[a("div",{staticClass:"card-title-block-bar"})]),a("q-icon",{attrs:{name:t.ICONS[t.GATT_TYPES.service].name,color:t.ICONS[t.GATT_TYPES.service].color,size:"lg"}}),a("div",{staticClass:"card-title-div"},[a("div",{staticClass:"card-title"},[t._v("\n        "+t._s(t.name)+"\n      ")]),a("i",{staticClass:"text-capitalize card-subtitle"},[t._v("\n        "+t._s(t.GATT_TYPES.service)+"\n      ")])]),a("div",{staticClass:"col row justify-end items-center q-px-md"},[a("q-btn",{attrs:{icon:"mdi-help",color:"blue",round:"",dense:"",unelevated:"",size:"sm","data-cy":"card-help"},on:{click:function(e){return t.goToMarkdownId("services")}}})],1)],1),a("div",{staticClass:"row q-pa-md q-col-gutter-md"},[a("div",{staticClass:"col-grow",staticStyle:{width:"500px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("q-input",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.name.label,"data-cy":"input-name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},"q-input",t.INPUT_PROPS,!1)),a("VInput",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.uuid.label,"data-cy":"input-uuid","validation-messages":t.uuidValidationMessages},model:{value:t.uuid,callback:function(e){t.uuid=e},expression:"uuid"}},"VInput",t.INPUT_PROPS,!1)),a("VInput",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.id.label,readonly:null==t.id,debounce:0,"validation-messages":t.idValMsgs,"data-cy":"input-id"},on:{focus:function(e){t.serviceIdTmp=t.id},blur:function(){"error"==t.idValMsgs.type?t.id=t.serviceIdTmp:t.maintainServiceIncludes({oldVal:t.serviceIdTmp,newVal:t.service.id})}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-checkbox",{attrs:{dense:"",value:null!=t.service.id,"data-cy":"input-id-enable"},on:{input:function(e){return t.id=e?"":null}}})]},proxy:!0}]),model:{value:t.id,callback:function(e){t.id=e},expression:"id"}},"VInput",t.INPUT_PROPS,!1)),a("q-input",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.type.label,"data-cy":"input-type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},"q-input",t.INPUT_PROPS,!1)),a("q-select",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.declaration_type.label,options:t.SERVICE_META.declaration_type.items,"data-cy":"input-declaration-type"},model:{value:t.declaration_type,callback:function(e){t.declaration_type=e},expression:"declaration_type"}},"q-select",t.INPUT_PROPS,!1)),a("div",{staticClass:"col-6 row items-center"},[a("q-toggle",t._b({attrs:{label:t.SERVICE_META.advertise.label,"data-cy":"input-advertise"},model:{value:t.advertise,callback:function(e){t.advertise=e},expression:"advertise"}},"q-toggle",t.INPUT_PROPS,!1))],1),a("q-select",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.includes.label,multiple:"",options:t.filteredServiceIds,"use-chips":"","data-cy":"input-includes"},model:{value:t.includes,callback:function(e){t.includes=e},expression:"includes"}},"q-select",t.INPUT_PROPS,!1)),a("q-select",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.capabilities.label,multiple:"",options:t.capabilityDeclarationNames,"use-chips":"","data-cy":"input-capabilities"},on:{input:t.maintainCapabilities},model:{value:t.capabilities,callback:function(e){t.capabilities=e},expression:"capabilities"}},"q-select",t.INPUT_PROPS,!1))],1)]),a("div",{staticClass:"col-grow",staticStyle:{width:"300px"}},[a("q-card",{staticClass:"fit",staticStyle:{"min-height":"100px"},attrs:{bordered:"",flat:""}},[a("q-scroll-area",{staticClass:"fit"},[a("q-input",t._b({staticClass:"q-px-sm",attrs:{autogrow:"",outlined:!1,borderless:"",label:t.SERVICE_META.info.label,"data-cy":"input-info"},model:{value:t.info,callback:function(e){t.info=e},expression:"info"}},"q-input",t.INPUT_PROPS,!1))],1)],1)],1),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-col-gutter-sm"},t._l(t.service.characteristics,(function(t){return a("div",{key:t.vueId,staticClass:"col-grow"},[a("SubGattItem",{attrs:{value:t}})],1)})),0)])])])},Ui=[],Li=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-input",t._g(t._b({attrs:{"hide-bottom-space":t.hideBottomSpace,debounce:t.debounce,error:"error"==t.validationMessages.type,"no-error-icon":"","data-cy":t.dataCy},scopedSlots:t._u([t.$slots.prepend?{key:"prepend",fn:function(){return[t._t("prepend")]},proxy:!0}:null,{key:"append",fn:function(){return[a("ValidationMarker",{attrs:{type:t.validationMessages.type,messages:t.validationMessages.messages}})]},proxy:!0}],null,!0)},"q-input",t.$attrs,!1),t.$listeners))},Qi=[],$i={namespaced:!0,components:{ValidationMarker:Ct},props:{validationMessages:{required:!1,type:Object,default:function(){return{type:"info",messages:[]}}},debounce:{type:Number,default:1e3},hideBottomSpace:{type:Boolean,default:!0},dataCy:{type:String,required:!0}}},Bi=$i,Yi=Object(N["a"])(Bi,Li,Qi,!1,null,null,null),Fi=Yi.exports;L()(Yi,"components",{QInput:Di["a"]});var zi={components:{SubGattItem:Pe,VInput:Fi},props:{service:{type:Object,required:!0}},data:function(){return{GATT_TYPES:C,SERVICE_META:q,ICONS:E,INPUT_PROPS:m()(m()({},T),{},{disable:!!this.service.source_file}),serviceIdTmp:null}},computed:m()(m()(m()({},Object(g["mapGetters"])("GattConfiguratorApp",["capabilityDeclarationNames","serviceIds"])),mi("service",Object.keys(new xt))),{},{filteredServiceIds:function(){var t=this;return this.serviceIds.filter((function(e){return t.service.id!=e}))},idValMsgs:function(){return ni(this.service.validationMessages.id)},uuidValidationMessages:function(){return ni(this.service.validationMessages.uuid)}}),watch:{serviceIds:function(){}},methods:m()(m()({},Object(g["mapActions"])("Markdown",["goToMarkdownId"])),Object(g["mapActions"])("GattConfiguratorApp",["setValue","maintainServiceIncludes","maintainCapabilities"]))},Wi=zi,Hi=a("ddd8"),Ki=a("4983"),Ji=Object(N["a"])(Wi,ji,Ui,!1,null,null,null),Zi=Ji.exports;L()(Ji,"components",{QCard:fe["a"],QIcon:R["a"],QBtn:oe["a"],QInput:Di["a"],QCheckbox:gi["a"],QSelect:Hi["a"],QToggle:ki["a"],QScrollArea:Ki["a"]});var Xi=!1,tn=!1,en=!1;function an(t,e){null==t||t.gatt_type!=e||Xi||nn(t.vueId)}function nn(t){if(en)en=!1;else{var e=document.getElementById(t);if(null!=e){var a=e.offsetTop-10;Xi=!0,tn=!0,window.scrollTo(0,a),Xi=!1}}}function rn(t,e,a){var i,n,r,s,c=t.position;if(Xi)return null;if(tn)return tn=!1,null;switch(e.gatt_type){case C.profile:return;case C.service:i=a.services;break;default:if(null==e["parent"])return null;i=e["parent"].children;break}for(var o in i){var l=i[o],u=document.getElementById(l.vueId);if(null!==u){if(u.offsetTop>=c+300){void 0===n&&(n=l);break}n=l}}return r=document.body.scrollHeight,s=window.scrollY+window.innerHeight,s>=r&&(n=i[i.length-1]),void 0!==n?(en=!0,setTimeout((function(){en=!1}),1e3),n):null}var sn={namespaced:!0,components:{Service:Zi},computed:m()({},Object(g["mapGetters"])("GattConfiguratorApp",["mergedGatt","selectedItem"])),watch:{selectedItem:function(){this.renderCompleteEvent()}},created:function(){this.renderCompleteEvent()},methods:{renderCompleteEvent:function(){var t=this;this.$nextTick((function(){an(t.selectedItem,C.service)}))}}},cn=sn,on=Object(N["a"])(cn,Ri,Gi,!1,null,null,null),ln=on.exports,un=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"column q-gutter-md"},t._l(t.selectedItem.parent.characteristics,(function(e){return a("Characteristic",{key:e.vueId,staticClass:"card",class:{"card-selected":e.vueId==t.selectedItem.vueId},attrs:{id:e.vueId,characteristic:e}})})),1)},dn=[],pn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{attrs:{"data-cy":"card-"+t.GATT_TYPES.characteristic}},[a("div",{staticClass:"row items-center q-gutter-sm q-pt-md"},[a("div",{staticClass:"col-auto"},[a("div",{staticClass:"card-title-block-bar"})]),a("q-icon",{attrs:{name:t.ICONS[t.GATT_TYPES.characteristic].name,color:t.ICONS[t.GATT_TYPES.characteristic].color,size:"lg"}}),a("div",{staticClass:"card-title-div"},[a("div",{staticClass:"card-title"},[t._v("\n        "+t._s(t.name)+"\n      ")]),a("i",{staticClass:"text-capitalize card-subtitle"},[t._v("\n        "+t._s(t.GATT_TYPES.characteristic)+"\n      ")])]),a("div",{staticClass:"col row justify-end items-center q-px-md"},[a("q-btn",{attrs:{icon:"mdi-help",color:"blue",round:"",dense:"",unelevated:"",size:"sm","data-cy":"card-help"},on:{click:function(e){return t.goToMarkdownId("characteristics")}}})],1)],1),a("div",{staticClass:"row q-pa-md q-col-gutter-md"},[a("div",{staticClass:"col-grow",staticStyle:{width:"500px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("q-input",t._b({staticClass:"col-6",attrs:{label:t.CHARACTERISTIC_META.name.label,"data-cy":"input-name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},"q-input",t.INPUT_PROPS,!1)),a("VInput",t._b({staticClass:"col-6",attrs:{label:t.CHARACTERISTIC_META.uuid.label,"data-cy":"input-uuid","validation-messages":t.uuidValidationMessages},model:{value:t.uuid,callback:function(e){t.uuid=e},expression:"uuid"}},"VInput",t.INPUT_PROPS,!1)),a("q-input",t._b({staticClass:"col-6",attrs:{label:t.CHARACTERISTIC_META.id.label,readonly:null==t.id,"data-cy":"input-id"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-checkbox",{attrs:{dense:"",value:null!=t.id,"data-cy":"input-id-enable"},on:{input:function(e){return t.id=e?"":null}}})]},proxy:!0}]),model:{value:t.id,callback:function(e){t.id=e},expression:"id"}},"q-input",t.INPUT_PROPS,!1)),a("q-input",t._b({staticClass:"col-6",attrs:{label:t.CHARACTERISTIC_META.type.label,"data-cy":"input-type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},"q-input",t.INPUT_PROPS,!1)),a("div",{staticClass:"col-12"},[a("AttributeValue",{attrs:{"gatt-item":t.characteristic}})],1),a("q-select",t._b({staticClass:"col-6",attrs:{label:t.CHARACTERISTIC_META.capabilities.label,multiple:"",options:t.characteristicCapabilityDeclarationOptions,"use-chips":"","data-cy":"input-capabilities"},model:{value:t.capabilities,callback:function(e){t.capabilities=e},expression:"capabilities"}},"q-select",t.INPUT_PROPS,!1)),a("q-input",t._b({staticClass:"col-6",attrs:{label:t.CHARACTERISTIC_META.description.label,readonly:null==t.description,"data-cy":"input-description"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-checkbox",{attrs:{dense:"",value:null!=t.description,"data-cy":"input-description-enable"},on:{input:function(e){return t.description=e?"":null}}})]},proxy:!0}]),model:{value:t.description,callback:function(e){t.description=e},expression:"description"}},"q-input",t.INPUT_PROPS,!1)),a("div",{staticClass:"col"},[a("PropertySettings",{attrs:{permissions:t.permissions,"validation-messages":t.propertiesValidationMessages,disable:!!t.characteristic.source_file}})],1)],1)]),a("div",{staticClass:"col-grow",staticStyle:{width:"300px"}},[a("q-card",{staticClass:"fit",staticStyle:{"min-height":"100px"},attrs:{bordered:"",flat:""}},[a("q-scroll-area",{staticClass:"fit"},[a("q-input",t._b({staticClass:"q-px-sm",attrs:{autogrow:"",outlined:!1,borderless:"",label:t.CHARACTERISTIC_META.info.label,"data-cy":"input-info"},model:{value:t.info,callback:function(e){t.info=e},expression:"info"}},"q-input",t.INPUT_PROPS,!1))],1)],1)],1),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-col-gutter-sm"},t._l(t.descriptors,(function(t){return a("div",{key:t.vueId,staticClass:"col-grow"},[a("SubGattItem",{attrs:{value:t}})],1)})),0)])])])},fn=[],mn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{attrs:{bordered:"",flat:""}},[a("div",{staticClass:"row q-col-gutter-sm q-pa-sm"},[a("div",{staticClass:"col-6 text-bold text-primary"},[t._v("\n      Value settings\n    ")]),a("div",{staticClass:"col-6 row items-center"},[a("div",{staticClass:"col-auto"},[a("q-btn-toggle",{staticClass:"btn-toggle",attrs:{size:"sm",dense:"",disable:!!t.gattItem.source_file,unelevated:"","toggle-color":"primary",color:"transparent","text-color":"primary",options:t.VALUE_META.type.items.map((function(t){return{label:t,value:t}})),"data-cy":"input-value-type","data-cy-value":t.type},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),a("q-tooltip",[t._v("Value type: "+t._s(t.type))])],1)]),"user"!=t.type?[a("div",{staticClass:"col-6 row items-center"},[a("q-toggle",t._b({attrs:{label:t.VALUE_META.constant.label,"data-cy":"input-constant"},model:{value:t.constant,callback:function(e){t.constant=e},expression:"constant"}},"q-toggle",t.INPUT_PROPS,!1))],1),a("div",{staticClass:"col-6 row items-center"},[a("q-toggle",t._b({attrs:{label:t.VALUE_META.variable_length.label,"data-cy":"input-variable-length"},model:{value:t.variable_length,callback:function(e){t.variable_length=e},expression:"variable_length"}},"q-toggle",t.INPUT_PROPS,!1))],1),a("VInput",t._b({staticClass:"col-6",attrs:{label:t.VALUE_META.init_value.label,"validation-messages":t.initValueValMsgs,"data-cy":"input-init-value",prefix:t.initialValuePrefix},model:{value:t.init_value,callback:function(e){t.init_value=e},expression:"init_value"}},"VInput",t.INPUT_PROPS,!1)),a("VInput",t._b({staticClass:"col-6",attrs:{readonly:!t.length_enable,label:t.VALUE_META.length.label,suffix:t.VALUE_META.length.unit,type:"number","validation-messages":t.valueLengthValMsgs,"data-cy":"input-length"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-checkbox",{attrs:{dense:"","data-cy":"input-length-enable"},model:{value:t.length_enable,callback:function(e){t.length_enable=e},expression:"length_enable"}},[a("q-tooltip",[t._v("Overwrite auto calculated length.")])],1)]},proxy:!0}],null,!1,4045484017),model:{value:t.calculated_length,callback:function(e){t.calculated_length=e},expression:"calculated_length"}},"VInput",t.INPUT_PROPS,!1))]:t._e()],2)])},vn=[];function hn(){var t={},e=function(e){t[e]={get:function(){return this.gattItem.value[e]},set:function(t){var a=this.gattItem.value;this.setValue({object:a,key:e,value:t})}}};for(var a in new Vt)e(a);return t}var gn={components:{VInput:Fi},props:{gattItem:{type:Object,required:!0}},computed:m()(m()({},hn()),{},{length_enable:{get:function(){return null!==this.length},set:function(t){this.length=t?this.calculated_length:null}},calculated_length:{get:function(){return this.length_enable?this.length:Dt(this.type)?this.init_value.replace(/0x/i,"").length/2:this.init_value.length},set:function(t){this.length=t}},initValueValMsgs:function(){return ni(this.gattItem.validationMessages.value_$_init_value)},valueLengthValMsgs:function(){return ni(this.gattItem.validationMessages.value_$_length)},initialValuePrefix:function(){return Dt(this.type)?"0x":""}}),created:function(){Object.assign(this,{VALUE_META:k,INPUT_PROPS:m()(m()({},T),{},{disable:!!this.gattItem.source_file})})},methods:m()({},Object(g["mapActions"])("GattConfiguratorApp",["setValue"]))},bn=gn,_n=(a("0087"),a("6a67")),yn=Object(N["a"])(bn,mn,vn,!1,null,null,null),In=yn.exports;L()(yn,"components",{QCard:fe["a"],QBtnToggle:_n["a"],QTooltip:ot["a"],QToggle:ki["a"],QCheckbox:gi["a"]});var Cn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-markup-table",{class:{"alert-error-border":"error"==t.validationMessages.type,"alert-warning-border":"warning"==t.validationMessages.type},attrs:{flat:"",bordered:"",dense:""}},[a("thead",[a("tr",[a("th",[t._v("Properties")]),a("th",[t._v("Authenticated")]),a("th",[t._v("Bonded")]),a("th",[t._v("Encrypted")]),a("th",[a("ValidationMarker",t._b({attrs:{placeholder:""}},"ValidationMarker",t.validationMessages,!1))],1)])]),a("tbody",t._l(t.permissions,(function(e,i){return a("PermissionRow",{key:i,attrs:{permission:e,disable:t.disable,"data-cy-row":i}})})),1)])},Tn=[],wn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[a("div",{staticClass:"column q-gutter-sm"},t._l(t.permission.properties,(function(e,i){return a("q-toggle",t._b({key:i,attrs:{label:t.names[i],"data-cy":"input-enable",value:e},on:{input:function(e){return t.setPropertyValue(e,i)}}},"q-toggle",t.INPUT_PROPS,!1))})),1)]),a("td",{staticClass:"text-center"},[a("q-checkbox",t._b({attrs:{"data-cy":"input-authenticated"},model:{value:t.authenticated,callback:function(e){t.authenticated=e},expression:"authenticated"}},"q-checkbox",t.INPUT_PROPS,!1))],1),a("td",{staticClass:"text-center"},[a("q-checkbox",t._b({attrs:{"data-cy":"input-bonded"},model:{value:t.bonded,callback:function(e){t.bonded=e},expression:"bonded"}},"q-checkbox",t.INPUT_PROPS,!1))],1),a("td",{staticClass:"text-center"},[a("q-checkbox",t._b({attrs:{"data-cy":"input-encrypted"},model:{value:t.encrypted,callback:function(e){t.encrypted=e},expression:"encrypted"}},"q-checkbox",t.INPUT_PROPS,!1))],1),a("td")])},Sn=[],En={read:"Read",write:"Write",reliable_write:"Reliable write",write_no_response:"Write without response",notify:"Notify",indicate:"Indicate"},On={props:{permission:{type:Object,required:!0},disable:Boolean},data:function(){return{INPUT_PROPS:m()(m()({},T),{},{disable:this.disable})}},computed:m()(m()({},mi("permission",Object.keys(new Gt))),{},{names:function(){return En}}),watch:{properties:{deep:!0,handler:function(){ma(this.permission.properties)||(this.authenticated=!1,this.bonded=!1,this.encrypted=!1)}},authenticated:function(t){t&&(this.enable=!0)},bonded:function(t){t&&(this.enable=!0)},encrypted:function(t){t&&(this.enable=!0)}},methods:m()(m()({},Object(g["mapActions"])("GattConfiguratorApp",["setValue"])),{},{setPropertyValue:function(t,e){this.setValue({key:e,value:t,object:this.permission.properties})}})},qn=On,kn=Object(N["a"])(qn,wn,Sn,!1,null,null,null),An=kn.exports;L()(kn,"components",{QToggle:ki["a"],QCheckbox:gi["a"]});var xn={components:{PermissionRow:An,ValidationMarker:Ct},props:{permissions:{type:Object,required:!0},validationMessages:{type:Object,required:!0},disable:Boolean}},Pn=xn,Mn=Object(N["a"])(Pn,Cn,Tn,!1,null,null,null),Dn=Mn.exports;L()(Mn,"components",{QMarkupTable:Ci["a"]});var Vn={components:{SubGattItem:Pe,AttributeValue:In,PropertySettings:Dn,VInput:Fi},props:{characteristic:{type:Object,required:!0}},data:function(){return{GATT_TYPES:C,CHARACTERISTIC_META:A,ICONS:E,INPUT_PROPS:m()(m()({},T),{},{disable:!!this.characteristic.source_file})}},computed:m()(m()(m()({},mi("characteristic",Object.keys(new Pt))),Object(g["mapGetters"])("GattConfiguratorApp",["capabilityDeclarationNames"])),{},{characteristicCapabilityDeclarationOptions:function(){var t;return t=this.characteristic.parent.capabilities.length>0?this.characteristic.parent.capabilities:this.capabilityDeclarationNames,t},propertiesValidationMessages:function(){return ni(this.characteristic.validationMessages.properties)},uuidValidationMessages:function(){return ni(this.characteristic.validationMessages.uuid)}}),methods:m()(m()({},Object(g["mapActions"])("Markdown",["goToMarkdownId"])),Object(g["mapActions"])("GattConfiguratorApp",["setValue"]))},Nn=Vn,Rn=Object(N["a"])(Nn,pn,fn,!1,null,null,null),Gn=Rn.exports;L()(Rn,"components",{QCard:fe["a"],QIcon:R["a"],QBtn:oe["a"],QInput:Di["a"],QCheckbox:gi["a"],QSelect:Hi["a"],QScrollArea:Ki["a"]});var jn={namespaced:!0,components:{Characteristic:Gn},computed:m()({},Object(g["mapGetters"])("GattConfiguratorApp",["selectedItem"])),watch:{selectedItem:function(){this.renderCompleteEvent()}},created:function(){this.renderCompleteEvent()},methods:{renderCompleteEvent:function(){var t=this;this.$nextTick((function(){an(t.selectedItem,C.characteristic)}))}}},Un=jn,Ln=Object(N["a"])(Un,un,dn,!1,null,null,null),Qn=Ln.exports,$n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"column q-gutter-md"},t._l(t.selectedItem.parent.descriptors,(function(e){return a("Descriptor",{key:e.vueId,staticClass:"card",class:{"card-selected":e.vueId==t.selectedItem.vueId},attrs:{id:e.vueId,descriptor:e}})})),1)},Bn=[],Yn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{attrs:{"data-cy":"card-"+t.GATT_TYPES.descriptor}},[a("div",{staticClass:"row items-center q-gutter-sm q-pt-md"},[a("div",{staticClass:"col-auto"},[a("div",{staticClass:"card-title-block-bar"})]),a("q-icon",{attrs:{name:t.ICONS[t.GATT_TYPES.descriptor].name,color:t.ICONS[t.GATT_TYPES.descriptor].color,size:"lg"}}),a("div",{staticClass:"card-title-div"},[a("div",{staticClass:"card-title"},[t._v("\n        "+t._s(t.name)+"\n      ")]),a("i",{staticClass:"text-capitalize card-subtitle"},[t._v("\n        "+t._s(t.GATT_TYPES.descriptor)+"\n      ")])]),a("div",{staticClass:"col row justify-end items-center q-px-md"},[a("q-btn",{attrs:{icon:"mdi-help",color:"blue",round:"",dense:"",unelevated:"",size:"sm","data-cy":"card-help"},on:{click:function(e){return t.goToMarkdownId("descriptors")}}})],1)],1),a("div",{staticClass:"row q-pa-md q-col-gutter-md"},[a("div",{staticClass:"col-grow",staticStyle:{width:"500px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("q-input",t._b({staticClass:"col-6",attrs:{label:t.DESCRIPTOR_META.name.label,"data-cy":"input-name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},"q-input",t.INPUT_PROPS,!1)),a("VInput",t._b({staticClass:"col-6",attrs:{label:t.DESCRIPTOR_META.uuid.label,"data-cy":"input-uuid","validation-messages":t.uuidValidationMessages},model:{value:t.uuid,callback:function(e){t.uuid=e},expression:"uuid"}},"VInput",t.INPUT_PROPS,!1)),a("q-input",t._b({staticClass:"col-6",attrs:{label:t.DESCRIPTOR_META.id.label,readonly:null==t.id,"data-cy":"input-id"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-checkbox",{attrs:{dense:"",value:null!=t.id,"data-cy":"input-id-enable"},on:{input:function(e){return t.id=e?"":null}}})]},proxy:!0}]),model:{value:t.id,callback:function(e){t.id=e},expression:"id"}},"q-input",t.INPUT_PROPS,!1)),a("q-input",t._b({staticClass:"col-6",attrs:{label:t.DESCRIPTOR_META.type.label,"data-cy":"input-type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},"q-input",t.INPUT_PROPS,!1)),a("div",{staticClass:"col-12"},[a("AttributeValue",{attrs:{"gatt-item":t.descriptor}})],1),a("div",{staticClass:"col-auto"},[a("PropertySettings",{attrs:{permissions:t.permissions,"validation-messages":t.propertiesValidationMessages,disable:!!t.descriptor.source_file}})],1)],1)]),a("div",{staticClass:"col-grow",staticStyle:{width:"250px"}},[a("q-card",{staticClass:"fit",staticStyle:{"min-height":"100px"},attrs:{bordered:"",flat:""}},[a("q-scroll-area",{staticClass:"fit"},[a("q-input",t._b({staticClass:"q-px-sm",attrs:{autogrow:"",outlined:!1,borderless:"",label:t.DESCRIPTOR_META.info.label,"data-cy":"input-info"},model:{value:t.info,callback:function(e){t.info=e},expression:"info"}},"q-input",t.INPUT_PROPS,!1))],1)],1)],1)])])},Fn=[],zn={components:{VInput:Fi,AttributeValue:In,PropertySettings:Dn},props:{descriptor:{type:Object,required:!0}},data:function(){return{GATT_TYPES:C,DESCRIPTOR_META:x,ICONS:E,INPUT_PROPS:m()(m()({},T),{},{disable:!!this.descriptor.source_file})}},computed:m()(m()(m()({},mi("descriptor",Object.keys(new Mt))),Object(g["mapGetters"])("GattConfiguratorApp",["gatt"])),{},{propertiesValidationMessages:function(){return ni(this.descriptor.validationMessages.properties)},uuidValidationMessages:function(){return ni(this.descriptor.validationMessages.uuid)}}),methods:m()(m()({},Object(g["mapActions"])("Markdown",["goToMarkdownId"])),Object(g["mapActions"])("GattConfiguratorApp",["setValue"]))},Wn=zn,Hn=Object(N["a"])(Wn,Yn,Fn,!1,null,null,null),Kn=Hn.exports;L()(Hn,"components",{QCard:fe["a"],QIcon:R["a"],QBtn:oe["a"],QInput:Di["a"],QCheckbox:gi["a"],QScrollArea:Ki["a"]});var Jn={namespaced:!0,components:{Descriptor:Kn},computed:m()({},Object(g["mapGetters"])("GattConfiguratorApp",["selectedItem"])),watch:{selectedItem:function(){this.renderCompleteEvent()}},created:function(){this.renderCompleteEvent()},methods:{renderCompleteEvent:function(){var t=this;this.$nextTick((function(){an(t.selectedItem,C.descriptor)}))}}},Zn=Jn,Xn=Object(N["a"])(Zn,$n,Bn,!1,null,null,null),tr=Xn.exports,er=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col row"},[a("div",{staticClass:"col-auto"},[a("q-card",{staticClass:"full-height column"},[a("q-btn-toggle",{attrs:{ripple:!1,"no-caps":"",options:t.tabOptions},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}}),a("q-separator",{staticStyle:{height:"1px"}}),a("div",{staticClass:"col-auto"},[a("q-input",{ref:"filter",staticClass:"q-px-sm",attrs:{borderless:"",dense:"",placeholder:"Filter",debounce:"500"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"mdi-filter-variant"}})]},proxy:!0},{key:"after",fn:function(){return[a("q-btn",t._b({attrs:{icon:"mdi-filter-menu-outline"}},"q-btn",t.ICON_BUTTON_PROPS,!1),[a("q-menu",[a("q-option-group",{staticClass:"q-pa-sm q-gutter-xs",attrs:{options:t.sourceOptions,color:"primary",dense:"",type:"checkbox"},model:{value:t.sourceFilter,callback:function(e){t.sourceFilter=e},expression:"sourceFilter"}})],1),a("q-tooltip",{attrs:{anchor:"center left",self:"center right"}},[t._v("\n                Source filter\n              ")])],1)]},proxy:!0}]),model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),a("q-separator",{staticStyle:{height:"1px"}}),a("div",{staticClass:"col"},[a("q-scroll-area",{staticClass:"fit"},t._l(t.GATT_TYPES,(function(e){return a("DragTree",{directives:[{name:"show",rawName:"v-show",value:e==t.tab,expression:"type == tab"}],key:e,attrs:{value:t.sigTree[e],"node-key":"vueId","read-only":"",groups:t.groups[e],"drag-options":{sort:!1,clone:t.clone},selected:t.selected},scopedSlots:t._u([{key:"label",fn:function(e){var i=e.node;return[a("div",{staticClass:"row sig-item q-pr-md"},[a("GattTreeItem",{staticClass:"cursor-pointer col",attrs:{value:i},on:{click:function(e){return t.selected=e},mousedown:function(e){return t.preFetchDraggedItem(e)}}}),a("q-btn",{staticClass:"sig-add",attrs:{dense:"",flat:"",icon:"mdi-plus-thick",color:"primary",size:"sm"},on:{click:function(e){return t.addSigItem(i)}}})],1)]}}],null,!0)})})),1)],1)],1)],1),a("div",{staticClass:"q-ml-md col"},[a("q-card",{staticClass:"column full-height"},[null!=t.selected?[a("div",{staticClass:"row items-center q-py-md q-gutter-x-sm sig-info-title-block"},[a("div",{staticClass:"col-auto"},[a("div",{staticClass:"sig-info-title-block-bar"})]),a("q-icon",{attrs:{name:t.ICONS[t.selected.gatt_type].name,color:t.ICONS[t.selected.gatt_type].color,size:"lg"}}),a("div",{staticClass:"card-title-div"},[a("div",{staticClass:"card-title"},[t._v("\n              "+t._s(t.selected.name)+"\n            ")]),a("i",{staticClass:"text-capitalize card-subtitle"},[t._v("\n              "+t._s(t.selected.gatt_type)+"\n            ")])])],1),a("div",[a("q-separator")],1),a("div",{staticClass:"col"},[a("q-scroll-area",{staticClass:"fit q-pa-md"},[a("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(t.info))])])],1)]:t._e()],2)],1)])},ar=[],ir=a("7937"),nr=ir["b"].capitalize;function rr(t,e){return t.reduce((function(t,a){if(a.children){var i=rr(a.children,e);if(i.length)return t.push(m()(m()({},a),{},{children:i,gatt_type:a.gatt_type})),t}return a.name.toLowerCase().includes(e)&&t.push(a),t}),[])}function sr(t,e,a){var i=t.filter((function(t){return a.includes(t.source)}));return e&&(i=rr(i,e.toLowerCase())),i}var cr={namespaced:!0,components:{DragTree:it,GattTreeItem:ut},data:function(){var t;return{GATT_TYPES:C,ICON_BUTTON_PROPS:w,ICONS:E,splitterModel:50,tab:C.profile,filterText:"",selected:null,info:"",sourceFilter:null,groups:(t={},I()(t,C.profile,[{name:C.service,pull:"clone",put:!1},{name:C.service,pull:"clone",put:!1}]),I()(t,C.service,[{name:C.service,pull:"clone",put:!1},{name:C.characteristic,pull:"clone",put:!1},{name:C.descriptor,pull:"clone",put:!1}]),I()(t,C.characteristic,[{name:C.characteristic,pull:"clone",put:!1}]),I()(t,C.descriptor,[{name:C.descriptor,pull:"clone",put:!1}]),t)}},computed:m()(m()(m()(m()({},Object(g["mapGetters"])("MainView",["id"])),Object(g["mapGetters"])("Sig",["sigTreeData","sources"])),Object(g["mapGetters"])("GattConfiguratorApp",["selectedItem"])),{},{sourceOptions:function(){return this.sources.map((function(t){return{value:t,label:P.source_labels[t]||t}}))},tabOptions:function(){return Object.keys(C).map((function(t){return{value:t,label:nr(t)+"s"}}))},profiles:function(){return sr(this.sigTreeData.profiles,this.filterText,this.sourceFilter)},services:function(){return sr(this.sigTreeData.services,this.filterText,this.sourceFilter)},characteristics:function(){return sr(this.sigTreeData.characteristics,this.filterText,this.sourceFilter)},descriptors:function(){return sr(this.sigTreeData.descriptors,this.filterText,this.sourceFilter)},sigTree:function(){var t;return t={},I()(t,C.profile,this.profiles),I()(t,C.service,this.services),I()(t,C.characteristic,this.characteristics),I()(t,C.descriptor,this.descriptors),t}}),watch:{selected:function(){this.updateInfo()}},created:function(){this.sourceFilter=this.sources,this.selected=this.sigTree[this.tab][0]},methods:m()(m()(m()({},Object(g["mapActions"])("GattConfiguratorApp",["addGattItem"])),Object(g["mapActions"])("Sig",["setDraggedItemPromise"])),{},{getTypes:function(t){var e=t,a=[];while(e)a.unshift(e.type),e=e.parent;return a},updateInfo:function(){var t=this,e=this.getTypes(this.selected);0!=e.length?re.getSigInfo(this.id,this.tab,e).then((function(e){t.info=e})).catch((function(e){t.info=e})):this.info=""},addSigItem:function(t){var e=this,a=this.getTypes(t);0!=a.length&&re.getSigGattItem(this.id,this.tab,a).then((function(t){if(Ot["a"].debug("SIG Gatt item:"),Ot["a"].debug(t,!0),null==e.selectedItem.source_file||null!=e.selectedItem.source_file&&(t.gattType==C.profile||t.gattType==C.service)){e.addGattItem(t);var a=Wt(zt(t));null!=(null===a||void 0===a?void 0:a.title)&&e.$q.notify(Yt["Notifications"].qNotificationHtmlObj(Yt["Notifications"].notificationHtmlMsg(a)))}})).catch((function(t){Ot["a"].error(t)}))},clone:function(t){return{gattType:this.tab,types:this.getTypes(t)}},preFetchDraggedItem:function(t){var e=this.getTypes(t);0!=e.length&&this.setDraggedItemPromise(re.getSigGattItem(this.id,this.tab,e))}})},or=cr,lr=(a("b6d9"),a("9f0a")),ur=a("adad"),dr=a("823b"),pr=Object(N["a"])(or,er,ar,!1,null,null,null),fr=pr.exports;L()(pr,"components",{QCard:fe["a"],QBtnToggle:_n["a"],QSeparator:te["a"],QInput:Di["a"],QIcon:R["a"],QBtn:oe["a"],QMenu:le["a"],QOptionGroup:lr["a"],QTooltip:ot["a"],QScrollArea:Ki["a"],QTabPanels:ur["a"],QTabPanel:dr["a"]});a("bfa9");var mr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"validator_"+t.gattItem.gatt_type+"_"+t.gattItem.vueId}},t._l(t.gattItem.services,(function(t){return a("ServiceValidators",{key:t.vueId,attrs:{"gatt-item":t}})})),1)},vr=[],hr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"validator_"+t.gattItem.gatt_type+"_"+t.gattItem.vueId}},t._l(t.gattItem.characteristics,(function(t){return a("CharacteristicValidators",{key:t.vueId,attrs:{"gatt-item":t}})})),1)},gr=[],br=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"validator_"+t.gattItem.gatt_type+"_"+t.gattItem.vueId}},t._l(t.gattItem.descriptors,(function(t){return a("DescriptorValidators",{key:t.vueId,attrs:{"gatt-item":t}})})),1)},_r=[],yr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"validator_"+t.gattItem.gatt_type+"_"+t.gattItem.vueId}})},Ir=[],Cr={props:{gattItem:{type:Object,required:!0}},computed:m()({},ri("descriptor")),mounted:function(){var t=this,e=function(e){t.$watch(e,(function(a){ii(t.gattItem,e,a)}),{immediate:!0})};for(var a in this.$options.computed)e(a)}},Tr=Cr,wr=Object(N["a"])(Tr,yr,Ir,!1,null,null,null),Sr=wr.exports,Er={components:{DescriptorValidators:Sr},props:{gattItem:{type:Object,required:!0}},computed:m()({},ri("characteristic")),mounted:function(){var t=this,e=function(e){t.$watch(e,(function(a){ii(t.gattItem,e,a)}),{immediate:!0})};for(var a in this.$options.computed)e(a)}},Or=Er,qr=Object(N["a"])(Or,br,_r,!1,null,null,null),kr=qr.exports,Ar={components:{CharacteristicValidators:kr},props:{gattItem:{type:Object,required:!0}},computed:m()({},ri("service")),mounted:function(){var t=this,e=function(e){t.$watch(e,(function(a){ii(t.gattItem,e,a)}),{immediate:!0})};for(var a in this.$options.computed)e(a)}},xr=Ar,Pr=Object(N["a"])(xr,hr,gr,!1,null,null,null),Mr=Pr.exports,Dr={components:{ServiceValidators:Mr},props:{gattItem:{type:Object,required:!0}},computed:m()({},ri("profile")),mounted:function(){var t=this,e=function(e){t.$watch(e,(function(a){ii(t.gattItem,e,a)}),{immediate:!0})};for(var a in this.$options.computed)e(a)}},Vr=Dr,Nr=Object(N["a"])(Vr,mr,vr,!1,null,null,null),Rr=Nr.exports,Gr={components:{ActivePageTitle:$,GattTree:ae,ButtonBar:ye,ProfileLayout:Ni,ServiceLayout:ln,CharacteristicLayout:Qn,DescriptorLayout:tr,SigLayout:fr,WaspMarkdown:Ne["WaspMarkdown"],ProfileValidators:Rr,UpgradeRuleDialog:Ve["UpgradeRuleDialog"]},data:function(){return{isDark:!0,GATT_TYPES:C,BUTTON_PROPS:S,mini:!1}},computed:m()(m()(m()({},Object(g["mapGetters"])("MainView",["sigLayout","dialogOn"])),Object(g["mapGetters"])("GattConfiguratorApp",["gatt","mergedGatt","selectedItem"])),{},{layout:function(){return this.selectedItem.gatt_type},headerClasses:function(){var t=!this.isDark;return{"bg-white":t,"text-black":t,"bg-dark":!t}}}),watch:{"$q.dark.isActive":function(t){this.isDark=t}},created:function(){this.isDark=this.$q.dark.isActive},methods:m()(m()(m()(m()({},Object(g["mapActions"])("MainView",["setSigLayout"])),Object(g["mapActions"])("Markdown",["goToMarkdownId"])),Object(g["mapActions"])("GattConfiguratorApp",["setSelectedItem"])),{},{onScroll:function(t){if(!this.sigLayout&&!this.dialogOn){var e=rn(t,this.selectedItem,this.mergedGatt);null!=e&&this.setSelectedItem(e)}}})},jr=Gr,Ur=a("4d5a"),Lr=a("e359"),Qr=a("9404"),$r=a("09e3"),Br=a("9989"),Yr=Object(N["a"])(jr,v,h,!1,null,null,null),Fr=Yr.exports;L()(Yr,"components",{QLayout:Ur["a"],QHeader:Lr["a"],QSeparator:te["a"],QBtn:oe["a"],QDrawer:Qr["a"],QScrollArea:Ki["a"],QPageContainer:$r["a"],QPage:Br["a"]});var zr=a("af10"),Wr=a.n(zr),Hr=(a("7654"),a("5993"),{components:{StudioLoader:Wr.a,AppWindow:Fr},computed:m()({},Object(g["mapGetters"])("MainView",["ready"]))}),Kr=Hr,Jr=Object(N["a"])(Kr,d,p,!1,null,null,null),Zr=Jr.exports,Xr=a("a18c"),ts=a.n(Xr),es=function(){return as.apply(this,arguments)};function as(){return as=n()(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("function"!==typeof fa){t.next=6;break}return t.next=3,fa({Vue:r["default"]});case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=fa;case 7:if(e=t.t0,"function"!==typeof ts.a){t.next=14;break}return t.next=11,ts()({Vue:r["default"],store:e});case 11:t.t1=t.sent,t.next=15;break;case 14:t.t1=ts.a;case 15:return a=t.t1,e.$router=a,i={router:a,store:e,render:function(t){return t(Zr)}},i.el="#q-app",t.abrupt("return",{app:i,store:e,router:a});case 20:case"end":return t.stop()}}),t)}))),as.apply(this,arguments)}var is=a("bc3a"),ns=a.n(is);r["default"].prototype.$axios=ns.a;var rs=function(t){var e=t.app;window.Cypress&&(window.app=e,Ot["a"].info("DEV or Cypress mode detected, app is available"))},ss="";function cs(){return os.apply(this,arguments)}function os(){return os=n()(regeneratorRuntime.mark((function t(){var e,a,i,n,s,c,o,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,es();case 2:e=t.sent,a=e.app,i=e.store,n=e.router,s=!1,c=function(t){s=!0;var e=Object(t)===t?n.resolve(t).route.fullPath:t;window.location.href=e},o=window.location.href.replace(window.location.origin,""),l=[void 0,void 0,rs],u=0;case 11:if(!(!1===s&&u<l.length)){t.next=29;break}if("function"===typeof l[u]){t.next=14;break}return t.abrupt("continue",26);case 14:return t.prev=14,t.next=17,l[u]({app:a,router:n,store:i,Vue:r["default"],ssrContext:null,redirect:c,urlPath:o,publicPath:ss});case 17:t.next=26;break;case 19:if(t.prev=19,t.t0=t["catch"](14),!t.t0||!t.t0.url){t.next=24;break}return window.location.href=t.t0.url,t.abrupt("return");case 24:return console.error("[Quasar] boot error:",t.t0),t.abrupt("return");case 26:u++,t.next=11;break;case 29:if(!0!==s){t.next=31;break}return t.abrupt("return");case 31:new r["default"](a);case 32:case"end":return t.stop()}}),t,null,[[14,19]])}))),os.apply(this,arguments)}cs()},"31cd":function(t,e,a){},"5bbd":function(t,e,a){},"72f7f":function(t,e,a){},"8c66":function(t,e,a){"use strict";a("ad81")},9633:function(t,e,a){"use strict";a("db4c")},a18c:function(t,e){},a70f:function(t,e,a){},ad81:function(t,e,a){},b6d9:function(t,e,a){"use strict";a("f63b")},c93e:function(t,e,a){"use strict";a("5bbd")},db4c:function(t,e,a){},f63b:function(t,e,a){}});