/********************************************************************
 * @file Accelerometer.c
 * @brief 1)setup accelerometer, enable free fall detection
 * @Description : Enable accelerometer for i2c mode of operation and enable free fall detection
 *
 * SDA : PC10
 * SCL : PC11
 * INT1: PC8
 * @author Sayali Mule
 * @date  November 17, 2021
 * @Reference:
 **********************************************************************/

//***********************************************************************************
//                              Include files
//***********************************************************************************
#include "i2c.h"

//***********************************************************************************
//                              Global variable
//***********************************************************************************


 //***********************************************************************************
 //                              Macros
 //***********************************************************************************


uint8_t  read_accelerometer_register(uint8_t reg_address)
{

  uint8_t read_data = 0;
  I2C_write(&reg_address, 1, ACCELEROMETER_SENSOR_ADDRESS);

  I2C_read(&read_data,1, ACCELEROMETER_SENSOR_ADDRESS);

  return read_data;
}

 /*------------------------------------------------------------------------------------------------------------------------------------*/
 /*
 @brief:Setup accelerometer
 @param: none
 @return: none
 */
 /*-----------------------------------------------------------------------------------------------------------------------------*/
void setup_accelerometer()
{
  /*ADXL345 GPIO pin setup.
    SDA : PC10
    SCL : PC11
    INT1: PC8
  */
  uint8_t val = 0;
  val = read_accelerometer_register(0x00);
  LOG_INFO("Val %x\n\r",val);
//  if (!accelerometer_init()) {
//      LOG_INFO("Accelerometer initialisation failed\n\r");
//  }
//  else
//  {
//      LOG_INFO("Accelerometer initilisation passed\n\r");
//  }
}

/*------------------------------------------------------------------------------------------------------------------------------------*/
/*
@brief: accelerometer initialisation
@param: none
@return: none
*/
/*-----------------------------------------------------------------------------------------------------------------------------*/
void accelerometer_init()
{

}
